<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capture Moments - Professional Photography</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FF6B6B;
            --secondary: #4ECDC4;
            --accent: #FFD166;
            --dark: #1A1A2E;
            --light: #F7F7F7;
            --gray: #6C757D;
            --success: #06D6A0;
            --warning: #FFD166;
            --danger: #EF476F;
            --blue: #2196F3;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
            margin-bottom: 1rem;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header Styles */
        header {
            background-color: var(--dark);
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent);
        }

        .logo span {
            color: var(--primary);
        }

        .desktop-nav {
            display: none;
        }

        .desktop-nav ul {
            display: flex;
            list-style: none;
        }

        .desktop-nav ul li {
            margin-left: 1.5rem;
        }

        .desktop-nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            padding: 0.5rem 0;
            position: relative;
        }

        .desktop-nav ul li a:hover {
            color: var(--accent);
        }

        .desktop-nav ul li a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--accent);
            transition: width 0.3s;
        }

        .desktop-nav ul li a:hover::after {
            width: 100%;
        }

        .profile-dropdown {
            position: relative;
            display: inline-block;
        }

        .profile-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            padding: 0.5rem 1rem;
            border-radius: 30px;
            transition: background-color 0.3s;
        }

        .profile-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .profile-btn i {
            margin-right: 0.5rem;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: var(--blue);
            min-width: 180px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            border-radius: 5px;
            z-index: 1;
            overflow: hidden;
        }

        .dropdown-content a {
            color: white;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            transition: background-color 0.3s;
        }

        .dropdown-content a:hover {
            background-color: #1976D2;
        }

        .profile-dropdown:hover .dropdown-content {
            display: block;
        }

        .profile-photo {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 8px;
            border: 2px solid var(--accent);
        }

        /* Mobile Navigation */
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--dark);
            display: flex;
            justify-content: space-around;
            padding: 0.8rem 0;
            z-index: 1000;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            text-decoration: none;
            font-size: 0.8rem;
        }

        .nav-item i {
            font-size: 1.2rem;
            margin-bottom: 0.3rem;
        }

        .nav-item.active {
            color: var(--accent);
        }

        /* Main Content */
        main {
            padding-bottom: 70px;
            min-height: calc(100vh - 140px);
        }

        .section {
            padding: 3rem 0;
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Home Section */
        .carousel {
            position: relative;
            width: 100%;
            height: 400px;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }

        .carousel-inner {
            display: flex;
            transition: transform 0.5s ease;
            height: 100%;
        }

        .carousel-item {
            min-width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            position: relative;
        }

        .carousel-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
        }

        .carousel-content {
            position: relative;
            z-index: 1;
            max-width: 80%;
        }

        .carousel-controls {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            transform: translateY(-50%);
            z-index: 2;
        }

        .carousel-control {
            background: rgba(255, 255, 255, 0.3);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin: 0 1rem;
            transition: background 0.3s;
        }

        .carousel-control:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        .carousel-indicators {
            position: absolute;
            bottom: 20px;
            width: 100%;
            display: flex;
            justify-content: center;
            z-index: 2;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            margin: 0 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .indicator.active {
            background: white;
        }

        /* Team Section */
        .section-title {
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: var(--primary);
        }

        .team-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .team-member {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
        }

        .team-member:hover {
            transform: translateY(-5px);
        }

        .member-img {
            height: 200px;
            background-size: cover;
            background-position: center;
        }

        .member-info {
            padding: 1rem;
            text-align: center;
        }

        /* WhatsApp Banner */
        .whatsapp-banner {
            background: linear-gradient(135deg, var(--secondary), #1BD7BB);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            text-align: center;
            margin: 2rem 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .whatsapp-btn {
            background: #25D366;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            transition: background 0.3s;
        }

        .whatsapp-btn:hover {
            background: #128C7E;
        }

        .whatsapp-btn i {
            margin-right: 0.5rem;
            font-size: 1.2rem;
        }

        /* Services Section */
        .services-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        .service-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
        }

        .service-card:hover {
            transform: translateY(-5px);
        }

        .service-img {
            height: 200px;
            background-size: cover;
            background-position: center;
        }

        .service-info {
            padding: 1.5rem;
        }

        .service-info h4 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .service-info p {
            color: var(--gray);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .book-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s;
        }

        .book-btn:hover {
            background: #FF5252;
        }

        .more-services-btn {
            display: block;
            margin: 2rem auto 0;
            background: var(--secondary);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s;
        }

        .more-services-btn:hover {
            background: #3BB5A9;
        }

        /* Contact Form */
        .contact-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        .contact-info {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .contact-details {
            margin-bottom: 2rem;
        }

        .contact-detail {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .contact-detail i {
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
        }

        .contact-form {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: 'Poppins', sans-serif;
            transition: border 0.3s;
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        .submit-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s;
        }

        .submit-btn:hover {
            background: #FF5252;
        }

        /* Messages Section */
        .messages-container {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .message-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 1rem;
            margin-bottom: 1rem;
            position: relative;
        }

        .message-item.solved {
            background: #d4edda;
            border-color: #c3e6cb;
        }

        .message-item.pending {
            background: #fff3cd;
            border-color: #ffeaa7;
        }

        .delete-message {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 3px;
            padding: 0.3rem 0.6rem;
            cursor: pointer;
            font-size: 0.8rem;
        }

        /* Tables */
        .table-container {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            overflow-x: auto;
            max-height: 500px;
            overflow-y: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background: var(--dark);
            color: white;
            font-weight: 500;
            position: sticky;
            top: 0;
        }

        tr:hover {
            background: #f9f9f9;
        }

        .status {
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-pending {
            background: rgba(255, 209, 102, 0.2);
            color: #E6A800;
        }

        .status-confirmed {
            background: rgba(6, 214, 160, 0.2);
            color: #06A67E;
        }

        .status-rejected {
            background: rgba(239, 71, 111, 0.2);
            color: #D32F5E;
        }

        .status-completed {
            background: rgba(78, 205, 196, 0.2);
            color: #2A9D8F;
        }

        .action-btn {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            margin-right: 0.5rem;
            font-size: 1rem;
        }

        .delete-btn {
            color: var(--danger);
        }

        .track-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 0.4rem 0.8rem;
            border-radius: 5px;
            font-size: 0.8rem;
            cursor: pointer;
        }

        /* Login & Signup Forms */
        .auth-container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .auth-title {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--dark);
        }

        .form-footer {
            text-align: center;
            margin-top: 1.5rem;
        }

        .form-footer a {
            color: var(--primary);
            text-decoration: none;
        }

        .form-footer a:hover {
            text-decoration: underline;
        }

        /* Booking Form */
        .booking-form {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            max-width: 800px;
            margin: 0 auto;
        }

        .service-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .service-option {
            display: flex;
            align-items: center;
            padding: 1rem;
            border: 2px solid #eee;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .service-option:hover {
            border-color: var(--primary);
        }

        .service-option.selected {
            border-color: var(--primary);
            background: rgba(255, 107, 107, 0.05);
        }

        .service-checkbox {
            margin-right: 1rem;
            width: 20px;
            height: 20px;
        }

        .service-details {
            flex: 1;
        }

        .service-name {
            font-weight: 600;
            margin-bottom: 0.3rem;
        }

        .service-price {
            color: var(--primary);
            font-weight: 600;
        }

        .total-price {
            text-align: right;
            font-size: 1.2rem;
            font-weight: 600;
            margin: 1.5rem 0;
            padding: 1rem;
            background: #f9f9f9;
            border-radius: 8px;
        }

        /* Toast Messages */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1100;
        }

        .toast {
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            max-width: 350px;
            transform: translateX(400px);
            transition: transform 0.3s;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast i {
            margin-right: 0.8rem;
            font-size: 1.2rem;
        }

        .toast-success {
            border-left: 4px solid var(--success);
        }

        .toast-error {
            border-left: 4px solid var(--danger);
        }

        .toast-warning {
            border-left: 4px solid var(--warning);
        }

        .toast-info {
            border-left: 4px solid var(--secondary);
        }

        /* Admin Dashboard */
        .admin-panel {
            display: none;
        }

        .admin-header {
            background: var(--dark);
            color: white;
            padding: 1rem 0;
            margin-bottom: 2rem;
        }

        .admin-nav {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .admin-nav-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s;
        }

        .admin-nav-btn.active {
            background: var(--secondary);
        }

        .admin-nav-btn:hover {
            background: #FF5252;
        }

        .admin-section {
            display: none;
        }

        .admin-section.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 2rem 0;
            text-align: center;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .social-links {
            display: flex;
            margin: 1.5rem 0;
        }

        .social-links a {
            color: white;
            margin: 0 0.8rem;
            font-size: 1.2rem;
            transition: color 0.3s;
        }

        .social-links a:hover {
            color: var(--accent);
        }

        .copyright {
            color: #aaa;
            font-size: 0.9rem;
        }

        /* New Service Badge */
        .new-badge {
            background: #dc3545;
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.7em;
            margin-left: 5px;
        }

        /* Profile Section Styles */
        .profile-container {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            max-width: 800px;
            margin: 0 auto;
        }

        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
        }

        .profile-photo-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 2rem;
            border: 5px solid var(--accent);
        }

        .profile-info h2 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .profile-info p {
            color: var(--gray);
            margin-bottom: 0.5rem;
        }

        .profile-details {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 1rem;
            background: #f9f9f9;
            border-radius: 8px;
        }

        .detail-label {
            font-weight: 600;
            color: var(--dark);
        }

        .detail-value {
            color: var(--gray);
        }

        .edit-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.3s;
        }

        .edit-btn:hover {
            background: #3BB5A9;
        }

        /* About Section */
        .about-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        .about-img {
            height: 400px;
            background-size: cover;
            background-position: center;
            border-radius: 10px;
        }

        .about-text {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        /* Portfolio Section */
        .portfolio-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        .portfolio-item {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
        }

        .portfolio-item:hover {
            transform: translateY(-5px);
        }

        .portfolio-img {
            height: 250px;
            background-size: cover;
            background-position: center;
        }

        /* Responsive Styles */
        @media (min-width: 768px) {
            .desktop-nav {
                display: flex;
            }

            .mobile-nav {
                display: none;
            }

            main {
                padding-bottom: 0;
            }

            .team-grid {
                grid-template-columns: 1fr 1fr 1fr 1fr;
            }

            .services-grid {
                grid-template-columns: 1fr 1fr 1fr;
            }

            .about-content {
                grid-template-columns: 1fr 1fr;
            }

            .portfolio-grid {
                grid-template-columns: 1fr 1fr;
            }

            .contact-container {
                grid-template-columns: 1fr 1fr;
            }

            .service-options {
                grid-template-columns: 1fr 1fr;
            }

            .profile-details {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (min-width: 992px) {
            .portfolio-grid {
                grid-template-columns: 1fr 1fr 1fr;
            }
            
            .services-grid {
                grid-template-columns: 1fr 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header id="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">Capture<span>Moments</span></div>
                <nav class="desktop-nav">
                    <ul>
                        <li><a href="#" class="nav-link" data-section="home">Home</a></li>
                        <li><a href="#" class="nav-link" data-section="about">About</a></li>
                        <li><a href="#" class="nav-link" data-section="portfolio">Portfolio</a></li>
                        <li><a href="#" class="nav-link" data-section="mybooking">My Bookings</a></li>
                        <li class="profile-dropdown">
                            <button class="profile-btn">
                                <img src="" alt="Profile" class="profile-photo" id="profile-photo" style="display: none;">
                                <i class="fas fa-user-circle"></i> <span id="profile-text">Account</span>
                            </button>
                            <div class="dropdown-content" id="profile-dropdown">
                                <!-- Dynamic content based on login status -->
                            </div>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav" id="mobile-nav">
        <a href="#" class="nav-item active" data-section="home">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="#" class="nav-item" data-section="about">
            <i class="fas fa-info-circle"></i>
            <span>About</span>
        </a>
        <a href="#" class="nav-item" data-section="portfolio">
            <i class="fas fa-images"></i>
            <span>Portfolio</span>
        </a>
        <a href="#" class="nav-item" data-section="mybooking">
            <i class="fas fa-calendar-check"></i>
            <span>Bookings</span>
        </a>
        <a href="#" class="nav-item" data-section="profile">
            <i class="fas fa-user"></i>
            <span>Profile</span>
        </a>
    </nav>

    <!-- Main Content -->
    <main>
        <!-- Home Section -->
        <section id="home" class="section active">
            <div class="container">
                <!-- Carousel -->
                <div class="carousel">
                    <div class="carousel-inner" id="carousel-inner">
                        <!-- Carousel items will be loaded dynamically -->
                    </div>
                    <div class="carousel-controls">
                        <button class="carousel-control prev">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="carousel-control next">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <div class="carousel-indicators" id="carousel-indicators">
                        <!-- Indicators will be loaded dynamically -->
                    </div>
                </div>

                <!-- Team Section -->
                <div class="section-title">
                    <h2>Our Team</h2>
                    <p>Meet our talented photographers</p>
                </div>
                <div class="team-grid">
                    <div class="team-member">
                        <div class="member-img" style="background-image: url('https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80');"></div>
                        <div class="member-info">
                            <h4>John Smith</h4>
                            <p>Wedding Photographer</p>
                        </div>
                    </div>
                    <div class="team-member">
                        <div class="member-img" style="background-image: url('https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80');"></div>
                        <div class="member-info">
                            <h4>Sarah Johnson</h4>
                            <p>Portrait Specialist</p>
                        </div>
                    </div>
                    <div class="team-member">
                        <div class="member-img" style="background-image: url('https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80');"></div>
                        <div class="member-info">
                            <h4>Michael Brown</h4>
                            <p>Commercial Photographer</p>
                        </div>
                    </div>
                    <div class="team-member">
                        <div class="member-img" style="background-image: url('https://images.unsplash.com/photo-1519244703995-f4e0f30006d5?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80');"></div>
                        <div class="member-info">
                            <h4>Emily Davis</h4>
                            <p>Event Photographer</p>
                        </div>
                    </div>
                </div>

                <!-- WhatsApp Banner -->
                <div class="whatsapp-banner">
                    <h3>Join Our WhatsApp Community</h3>
                    <p>Get updates on special offers, photography tips, and exclusive content</p>
                    <button class="whatsapp-btn">
                        <i class="fab fa-whatsapp"></i> Join Now
                    </button>
                </div>

                <!-- Services Section -->
                <div class="section-title">
                    <h2>Our Services</h2>
                    <p>Professional photography services for all occasions</p>
                </div>
                <div class="services-grid" id="services-grid">
                    <!-- Services will be loaded dynamically from database -->
                </div>
                <button class="more-services-btn" id="more-services-btn">Show More Services</button>

                <!-- Contact Form -->
                <div class="section-title">
                    <h2>Contact Us</h2>
                    <p>Get in touch for bookings and inquiries</p>
                </div>
                <div class="contact-container">
                    <div class="contact-info">
                        <h3>Get In Touch</h3>
                        <div class="contact-details">
                            <div class="contact-detail">
                                <i class="fas fa-map-marker-alt"></i>
                                <div>
                                    <h4>Our Location</h4>
                                    <p>123 Photography Studio, City</p>
                                </div>
                            </div>
                            <div class="contact-detail">
                                <i class="fas fa-phone"></i>
                                <div>
                                    <h4>Phone Number</h4>
                                    <p>+1 (555) 123-4567</p>
                                </div>
                            </div>
                            <div class="contact-detail">
                                <i class="fas fa-envelope"></i>
                                <div>
                                    <h4>Email Address</h4>
                                    <p>info@capturemoments.com</p>
                                </div>
                            </div>
                            <div class="contact-detail">
                                <i class="fas fa-clock"></i>
                                <div>
                                    <h4>Working Hours</h4>
                                    <p>Mon - Fri: 9AM - 6PM</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="contact-form">
                        <form id="contact-form">
                            <div class="form-group">
                                <label for="name">Full Name</label>
                                <input type="text" id="name" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="email">Email Address</label>
                                <input type="email" id="email" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="phone">Phone Number</label>
                                <input type="tel" id="phone" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="message">Message</label>
                                <textarea id="message" class="form-control" required></textarea>
                            </div>
                            <button type="submit" class="submit-btn">Send Message</button>
                            <button type="button" class="submit-btn" id="my-messages-btn" style="margin-left: 10px; background: var(--secondary);">
                                My Messages
                            </button>
                        </form>
                    </div>
                </div>

                <!-- User Messages Display -->
                <div id="user-messages" style="display: none; margin-top: 2rem;">
                    <h3>My Messages</h3>
                    <div class="messages-container" id="messages-list">
                        <!-- Messages will be loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="section">
            <div class="container">
                <div class="about-content">
                    <div class="about-img" style="background-image: url('https://images.unsplash.com/photo-1554048612-b6a482bc67e5?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                    <div class="about-text">
                        <h2>About Our Photography</h2>
                        <p>At Capture Moments, we believe that photography is more than just taking pictures - it's about capturing emotions, telling stories, and preserving memories that last a lifetime.</p>
                        <p>Founded in 2010, our team of professional photographers has over a decade of experience in various photography genres, from weddings and portraits to commercial and event photography.</p>
                        <p>We pride ourselves on our attention to detail, creative vision, and ability to make every client feel comfortable in front of the camera. Our goal is to create images that you'll treasure for years to come.</p>
                        <p>Whether you're planning a wedding, need professional headshots, or want to document a special event, we're here to help you capture those precious moments.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Portfolio Section -->
      <section id="portfolio" class="section">
    <div class="container">
        <div class="section-title">
            <h2>Our Portfolio</h2>
            <p>A collection of our recent work</p>
        </div>
        
        <!-- Portfolio Tabs -->
        <div class="portfolio-tabs">
            <button class="tab-btn active" data-tab="photos">Photos</button>
            <button class="tab-btn" data-tab="videos">Videos</button>
        </div>
        
        <!-- Category Filter -->
        <div class="category-filter">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="wedding">Wedding</button>
            <button class="filter-btn" data-filter="portrait">Portrait</button>
            <button class="filter-btn" data-filter="event">Event</button>
            <button class="filter-btn" data-filter="commercial">Commercial</button>
        </div>
        
        <!-- Photos Content -->
        <div id="photos-content" class="portfolio-content active">
            <div class="photos-grid">
                <!-- Photos will be loaded here -->
            </div>
            <button class="load-more-btn" id="load-more-photos">Load More Photos</button>
        </div>
        
        <!-- Videos Content -->
        <div id="videos-content" class="portfolio-content">
            <div class="videos-grid">
                <!-- Videos will be loaded here -->
            </div>
            <button class="load-more-btn" id="load-more-videos">Load More Videos</button>
        </div>
    </div>
    
    <!-- Lightbox Modal -->
    <div id="lightbox" class="lightbox">
        <div class="lightbox-content">
            <span class="lightbox-close">&times;</span>
            <div class="lightbox-nav">
                <button class="lightbox-prev"><i class="fas fa-chevron-left"></i></button>
                <button class="lightbox-next"><i class="fas fa-chevron-right"></i></button>
            </div>
            <div class="lightbox-media">
                <!-- Media will be loaded here -->
            </div>
            <div class="lightbox-info">
                <h3 id="lightbox-title"></h3>
                <p id="lightbox-description"></p>
                <div class="lightbox-meta">
                    <span id="lightbox-category"></span>
                    <span id="lightbox-date"></span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Download Progress -->
    <div id="download-progress" class="download-progress">
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>
        <span class="progress-text">Preparing download...</span>
    </div>
</section>

<style>
    /* Portfolio Tabs */
    .portfolio-tabs {
        display: flex;
        justify-content: center;
        margin-bottom: 1.5rem;
        border-bottom: 1px solid #eee;
    }
    
    .tab-btn {
        background: none;
        border: none;
        padding: 0.8rem 1.5rem;
        font-size: 1rem;
        font-weight: 500;
        color: var(--gray);
        cursor: pointer;
        position: relative;
        transition: color 0.3s;
    }
    
    .tab-btn.active {
        color: var(--primary);
    }
    
    .tab-btn.active::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        width: 100%;
        height: 3px;
        background: var(--primary);
    }
    
    /* Category Filter */
    .category-filter {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-bottom: 2rem;
    }
    
    .filter-btn {
        background: white;
        border: 1px solid #ddd;
        padding: 0.5rem 1rem;
        border-radius: 25px;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .filter-btn.active,
    .filter-btn:hover {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
    }
    
    .portfolio-content {
        display: none;
    }
    
    .portfolio-content.active {
        display: block;
    }
    
    /* Photos Grid with Different Shapes */
    .photos-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.5rem;
        margin-bottom: 1.5rem;
    }
    
    .photo-item {
        position: relative;
        overflow: hidden;
        cursor: pointer;
        transition: transform 0.3s;
        background: var(--dark);
    }
    
    .photo-item:hover {
        transform: scale(1.03);
    }
    
    .photo-item:hover .photo-actions {
        opacity: 1;
    }
    
    .photo-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        transition: transform 0.5s;
    }
    
    .photo-item:hover .photo-img {
        transform: scale(1.1);
    }
    
    /* Different Photo Shapes */
    .photo-item.square {
        aspect-ratio: 1;
        border-radius: 8px;
    }
    
    .photo-item.portrait {
        aspect-ratio: 3/4;
        border-radius: 12px;
    }
    
    .photo-item.landscape {
        aspect-ratio: 4/3;
        border-radius: 8px;
    }
    
    .photo-item.panorama {
        aspect-ratio: 16/9;
        border-radius: 6px;
    }
    
    .photo-item.circle {
        aspect-ratio: 1;
        border-radius: 50%;
    }
    
    .photo-actions {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        display: flex;
        gap: 0.5rem;
        opacity: 0;
        transition: opacity 0.3s;
    }
    
    .action-btn {
        background: rgba(255, 255, 255, 0.9);
        border: none;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.3s;
    }
    
    .action-btn:hover {
        background: white;
        transform: scale(1.1);
    }
    
    .action-btn.download:hover {
        color: var(--primary);
    }
    
    .action-btn.like:hover {
        color: var(--danger);
    }
    
    .photo-info {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
        color: white;
        padding: 1rem;
        transform: translateY(100%);
        transition: transform 0.3s;
    }
    
    .photo-item:hover .photo-info {
        transform: translateY(0);
    }
    
    .photo-info h4 {
        margin-bottom: 0.3rem;
        font-size: 0.9rem;
    }
    
    .photo-info p {
        font-size: 0.8rem;
        opacity: 0.9;
        margin: 0;
    }
    
    /* Videos Grid */
    .videos-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
        margin-bottom: 1.5rem;
    }
    
    .video-item {
        position: relative;
        border-radius: 10px;
        overflow: hidden;
        background: var(--dark);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        cursor: pointer;
    }
    
    .video-player {
        width: 100%;
        height: auto;
        display: block;
    }
    
    .video-info {
        padding: 1rem;
        background: white;
    }
    
    .video-info h4 {
        margin-bottom: 0.5rem;
        color: var(--dark);
    }
    
    .video-info p {
        color: var(--gray);
        font-size: 0.9rem;
        margin: 0;
    }
    
    .video-controls {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
        padding: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        opacity: 0;
        transition: opacity 0.3s;
    }
    
    .video-item:hover .video-controls {
        opacity: 1;
    }
    
    .play-btn {
        background: var(--primary);
        color: white;
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1rem;
    }
    
    .volume-btn {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: none;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 0.9rem;
    }
    
    .load-more-btn {
        display: block;
        margin: 0 auto;
        background: var(--secondary);
        color: white;
        border: none;
        padding: 0.8rem 1.5rem;
        border-radius: 5px;
        font-weight: 500;
        cursor: pointer;
        transition: background 0.3s;
    }
    
    .load-more-btn:hover {
        background: #3BB5A9;
    }
    
    /* Lightbox Styles */
    .lightbox {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 2000;
        opacity: 0;
        transition: opacity 0.3s;
    }
    
    .lightbox.active {
        display: flex;
        opacity: 1;
        align-items: center;
        justify-content: center;
    }
    
    .lightbox-content {
        position: relative;
        max-width: 90%;
        max-height: 90%;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
    }
    
    .lightbox-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        color: white;
        font-size: 2rem;
        cursor: pointer;
        z-index: 2001;
        background: rgba(0, 0, 0, 0.5);
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .lightbox-nav {
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        display: flex;
        justify-content: space-between;
        padding: 0 1rem;
        transform: translateY(-50%);
        z-index: 2001;
    }
    
    .lightbox-prev,
    .lightbox-next {
        background: rgba(0, 0, 0, 0.5);
        color: white;
        border: none;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.2rem;
        transition: background 0.3s;
    }
    
    .lightbox-prev:hover,
    .lightbox-next:hover {
        background: rgba(0, 0, 0, 0.8);
    }
    
    .lightbox-media {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--dark);
    }
    
    .lightbox-media img,
    .lightbox-media video {
        max-width: 100%;
        max-height: 70vh;
        object-fit: contain;
    }
    
    .lightbox-info {
        padding: 1.5rem;
        background: white;
    }
    
    .lightbox-info h3 {
        margin-bottom: 0.5rem;
        color: var(--dark);
    }
    
    .lightbox-info p {
        color: var(--gray);
        margin-bottom: 1rem;
    }
    
    .lightbox-meta {
        display: flex;
        gap: 1rem;
        font-size: 0.9rem;
    }
    
    .lightbox-meta span {
        background: #f0f0f0;
        padding: 0.3rem 0.8rem;
        border-radius: 15px;
        font-size: 0.8rem;
    }
    
    /* Download Progress */
    .download-progress {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: white;
        padding: 1rem;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        display: none;
        z-index: 1000;
        min-width: 200px;
    }
    
    .download-progress.active {
        display: block;
    }
    
    .progress-bar {
        width: 100%;
        height: 6px;
        background: #f0f0f0;
        border-radius: 3px;
        overflow: hidden;
        margin-bottom: 0.5rem;
    }
    
    .progress-fill {
        height: 100%;
        background: var(--success);
        width: 0%;
        transition: width 0.3s;
    }
    
    .progress-text {
        font-size: 0.8rem;
        color: var(--gray);
    }
    
    /* Like Animation */
    @keyframes heartBeat {
        0% { transform: scale(1); }
        50% { transform: scale(1.3); }
        100% { transform: scale(1); }
    }
    
    .like-animation {
        animation: heartBeat 0.6s ease;
    }
    
    /* Responsive Styles */
    @media (min-width: 768px) {
        .photos-grid {
            grid-template-columns: repeat(3, 1fr);
            gap: 0.8rem;
        }
        
        .videos-grid {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .video-item.portrait {
            grid-column: span 1;
        }
        
        .video-item.landscape {
            grid-column: span 2;
        }
        
        .lightbox-content {
            flex-direction: row;
            max-width: 95%;
            max-height: 80%;
        }
        
        .lightbox-media {
            max-width: 70%;
        }
        
        .lightbox-info {
            max-width: 30%;
            padding: 2rem;
        }
    }
    
    @media (min-width: 992px) {
        .photos-grid {
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }
        
        .videos-grid {
            grid-template-columns: repeat(3, 1fr);
        }
        
        .video-item.portrait {
            grid-column: span 1;
        }
        
        .video-item.landscape {
            grid-column: span 2;
        }
        
        /* Masonry layout for desktop */
        .photos-grid.masonry {
            grid-template-columns: repeat(4, 1fr);
            grid-auto-rows: masonry;
        }
        
        .photos-grid.masonry .photo-item:nth-child(8n+1),
        .photos-grid.masonry .photo-item:nth-child(8n+3) {
            grid-row: span 2;
        }
    }
</style>

<script>
    // Enhanced Portfolio Section Functionality
    document.addEventListener('DOMContentLoaded', function() {
        // Portfolio Elements
        const tabBtns = document.querySelectorAll('.tab-btn');
        const portfolioContents = document.querySelectorAll('.portfolio-content');
        const filterBtns = document.querySelectorAll('.filter-btn');
        const photosGrid = document.querySelector('.photos-grid');
        const videosGrid = document.querySelector('.videos-grid');
        const loadMorePhotosBtn = document.getElementById('load-more-photos');
        const loadMoreVideosBtn = document.getElementById('load-more-videos');
        const lightbox = document.getElementById('lightbox');
        const lightboxClose = document.querySelector('.lightbox-close');
        const lightboxMedia = document.querySelector('.lightbox-media');
        const lightboxTitle = document.getElementById('lightbox-title');
        const lightboxDescription = document.getElementById('lightbox-description');
        const lightboxCategory = document.getElementById('lightbox-category');
        const lightboxDate = document.getElementById('lightbox-date');
        const lightboxPrev = document.querySelector('.lightbox-prev');
        const lightboxNext = document.querySelector('.lightbox-next');
        const downloadProgress = document.getElementById('download-progress');
        const progressFill = document.querySelector('.progress-fill');
        const progressText = document.querySelector('.progress-text');
        
        // Sample Data with different shapes and categories
        const photosData = [
            { id: 1, src: 'https://images.unsplash.com/photo-1519225421980-715cb0215aed?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80', title: 'Wedding Ceremony', description: 'Beautiful outdoor wedding ceremony', category: 'wedding', shape: 'portrait', date: '2023-06-15', likes: 24 },
            { id: 2, src: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80', title: 'Professional Headshot', description: 'Corporate portrait session', category: 'portrait', shape: 'square', date: '2023-07-22', likes: 18 },
            { id: 3, src: 'https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80', title: 'Corporate Event', description: 'Annual company conference', category: 'event', shape: 'landscape', date: '2023-08-10', likes: 31 },
            { id: 4, src: 'https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80', title: 'Product Photography', description: 'Commercial product shots', category: 'commercial', shape: 'square', date: '2023-09-05', likes: 42 },
            { id: 5, src: 'https://images.unsplash.com/photo-1519244703995-f4e0f30006d5?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80', title: 'Bridal Portrait', description: 'Elegant bridal studio session', category: 'wedding', shape: 'portrait', date: '2023-06-20', likes: 56 },
            { id: 6, src: 'https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80', title: 'Family Session', description: 'Outdoor family photography', category: 'portrait', shape: 'landscape', date: '2023-07-30', likes: 29 },
            { id: 7, src: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80', title: 'Birthday Party', description: 'Kids birthday celebration', category: 'event', shape: 'panorama', date: '2023-08-15', likes: 33 },
            { id: 8, src: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80', title: 'Fashion Shoot', description: 'Urban fashion photography', category: 'commercial', shape: 'circle', date: '2023-09-12', likes: 67 },
            { id: 9, src: 'https://images.unsplash.com/photo-1519699047748-de8e457a634e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80', title: 'Wedding Reception', description: 'Evening reception party', category: 'wedding', shape: 'landscape', date: '2023-06-18', likes: 48 },
            { id: 10, src: 'https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80', title: 'Pet Photography', description: 'Professional pet portraits', category: 'portrait', shape: 'square', date: '2023-07-25', likes: 52 },
            { id: 11, src: 'https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80', title: 'Product Launch', description: 'New product unveiling event', category: 'event', shape: 'portrait', date: '2023-08-22', likes: 27 },
            { id: 12, src: 'https://images.unsplash.com/photo-1544725176-7c40e5a71c5e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80', title: 'Brand Campaign', description: 'Corporate brand photography', category: 'commercial', shape: 'landscape', date: '2023-09-18', likes: 39 }
        ];
        
        const videosData = [
            { 
                id: 1, 
                src: 'https://assets.mixkit.co/videos/preview/mixkit-portrait-of-a-woman-in-a-pool-1259-large.mp4', 
                poster: 'https://images.unsplash.com/photo-1542038784456-1ea8e935640e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
                title: 'Wedding Highlights', 
                description: 'Beautiful moments from a summer wedding',
                category: 'wedding',
                aspect: 'portrait',
                date: '2023-06-12',
                likes: 89
            },
            { 
                id: 2, 
                src: 'https://assets.mixkit.co/videos/preview/mixkit-young-woman-talking-on-her-cell-phone-while-4455-large.mp4', 
                poster: 'https://images.unsplash.com/photo-1511895426328-dc8714191300?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
                title: 'Portrait Session', 
                description: 'Professional portrait video session',
                category: 'portrait',
                aspect: 'portrait',
                date: '2023-07-18',
                likes: 64
            },
            { 
                id: 3, 
                src: 'https://assets.mixkit.co/videos/preview/mixkit-forest-stream-in-the-sunlight-529-large.mp4', 
                poster: 'https://images.unsplash.com/photo-1521334884684-d80222895322?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
                title: 'Nature Photography', 
                description: 'Capturing the beauty of natural landscapes',
                category: 'commercial',
                aspect: 'landscape',
                date: '2023-08-05',
                likes: 112
            },
            { 
                id: 4, 
                src: 'https://assets.mixkit.co/videos/preview/mixkit-close-up-portrait-of-a-bearded-man-4454-large.mp4', 
                poster: 'https://images.unsplash.com/photo-1516035069371-29a1b244cc32?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
                title: 'Commercial Video', 
                description: 'Professional commercial video production',
                category: 'commercial',
                aspect: 'portrait',
                date: '2023-09-08',
                likes: 76
            },
            { 
                id: 5, 
                src: 'https://assets.mixkit.co/videos/preview/mixkit-girl-in-neon-sign-1232-large.mp4', 
                poster: 'https://images.unsplash.com/photo-1554048612-b6a482bc67e5?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
                title: 'Urban Fashion', 
                description: 'Fashion photography in urban settings',
                category: 'event',
                aspect: 'portrait',
                date: '2023-08-25',
                likes: 93
            },
            { 
                id: 6, 
                src: 'https://assets.mixkit.co/videos/preview/mixkit-young-woman-dancing-at-a-party-4456-large.mp4', 
                poster: 'https://images.unsplash.com/photo-1469371670807-013ccf25f16a?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
                title: 'Event Coverage', 
                description: 'Complete event photography and videography',
                category: 'event',
                aspect: 'landscape',
                date: '2023-09-14',
                likes: 81
            }
        ];
        
        // State variables
        let currentPhotosPage = 1;
        let currentVideosPage = 1;
        const itemsPerPage = 8;
        let currentlyPlayingVideo = null;
        let currentFilter = 'all';
        let currentLightboxIndex = 0;
        let currentLightboxItems = [];
        let likedItems = JSON.parse(localStorage.getItem('portfolioLikes')) || {};
        
        // Initialize portfolio
        function initPortfolio() {
            loadPhotos();
            loadVideos();
            setupEventListeners();
            applyMasonryLayout();
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Tab switching
            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Update active tab
                    tabBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show corresponding content
                    portfolioContents.forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(`${tabId}-content`).classList.add('active');
                    
                    // Reapply masonry layout when switching to photos
                    if (tabId === 'photos') {
                        setTimeout(applyMasonryLayout, 100);
                    }
                });
            });
            
            // Filter buttons
            filterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const filter = this.getAttribute('data-filter');
                    
                    // Update active filter
                    filterBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    currentFilter = filter;
                    currentPhotosPage = 1;
                    loadPhotos();
                });
            });
            
            // Load more buttons
            loadMorePhotosBtn.addEventListener('click', loadMorePhotos);
            loadMoreVideosBtn.addEventListener('click', loadMoreVideos);
            
            // Lightbox controls
            lightboxClose.addEventListener('click', closeLightbox);
            lightboxPrev.addEventListener('click', showPrevMedia);
            lightboxNext.addEventListener('click', showNextMedia);
            
            // Close lightbox on background click
            lightbox.addEventListener('click', function(e) {
                if (e.target === lightbox) {
                    closeLightbox();
                }
            });
            
            // Keyboard navigation for lightbox
            document.addEventListener('keydown', function(e) {
                if (lightbox.classList.contains('active')) {
                    if (e.key === 'Escape') closeLightbox();
                    if (e.key === 'ArrowLeft') showPrevMedia();
                    if (e.key === 'ArrowRight') showNextMedia();
                }
            });
        }
        
        // Apply masonry layout for photos
        function applyMasonryLayout() {
            if (window.innerWidth >= 992) {
                photosGrid.classList.add('masonry');
            } else {
                photosGrid.classList.remove('masonry');
            }
        }
        
        // Load photos with filtering
        function loadPhotos() {
            const filteredPhotos = currentFilter === 'all' 
                ? photosData 
                : photosData.filter(photo => photo.category === currentFilter);
                
            const startIndex = 0;
            const endIndex = Math.min(itemsPerPage, filteredPhotos.length);
            const photosToShow = filteredPhotos.slice(startIndex, endIndex);
            
            renderPhotos(photosToShow);
            
            // Hide load more button if all photos are loaded
            if (endIndex >= filteredPhotos.length) {
                loadMorePhotosBtn.style.display = 'none';
            } else {
                loadMorePhotosBtn.style.display = 'block';
            }
        }
        
        // Load more photos
        function loadMorePhotos() {
            currentPhotosPage++;
            const filteredPhotos = currentFilter === 'all' 
                ? photosData 
                : photosData.filter(photo => photo.category === currentFilter);
                
            const startIndex = (currentPhotosPage - 1) * itemsPerPage;
            const endIndex = Math.min(currentPhotosPage * itemsPerPage, filteredPhotos.length);
            const photosToShow = filteredPhotos.slice(startIndex, endIndex);
            
            renderPhotos(photosToShow, true);
            
            // Hide load more button if all photos are loaded
            if (endIndex >= filteredPhotos.length) {
                loadMorePhotosBtn.style.display = 'none';
            }
        }
        
        // Render photos to grid
        function renderPhotos(photos, append = false) {
            if (!append) {
                photosGrid.innerHTML = '';
            }
            
            photos.forEach(photo => {
                const isLiked = likedItems[`photo-${photo.id}`] || false;
                const likeIcon = isLiked ? 'fas fa-heart' : 'far fa-heart';
                const likeClass = isLiked ? 'like liked' : 'like';
                
                const photoItem = document.createElement('div');
                photoItem.className = `photo-item ${photo.shape}`;
                photoItem.setAttribute('data-id', photo.id);
                photoItem.setAttribute('data-type', 'photo');
                photoItem.setAttribute('data-category', photo.category);
                photoItem.innerHTML = `
                    <img src="${photo.src}" alt="${photo.title}" class="photo-img">
                    <div class="photo-actions">
                        <button class="action-btn download" title="Download">
                            <i class="fas fa-download"></i>
                        </button>
                        <button class="action-btn ${likeClass}" title="Like">
                            <i class="${likeIcon}"></i>
                        </button>
                    </div>
                    <div class="photo-info">
                        <h4>${photo.title}</h4>
                        <p>${photo.description}</p>
                    </div>
                `;
                photosGrid.appendChild(photoItem);
                
                // Add event listeners
                setupPhotoInteractions(photoItem, photo);
            });
            
            // Reapply masonry layout after rendering
            setTimeout(applyMasonryLayout, 50);
        }
        
        // Setup photo interactions
        function setupPhotoInteractions(photoItem, photo) {
            const downloadBtn = photoItem.querySelector('.download');
            const likeBtn = photoItem.querySelector('.like');
            const likeIcon = likeBtn.querySelector('i');
            
            // Download functionality
            downloadBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                downloadMedia(photo.src, photo.title);
            });
            
            // Like functionality
            likeBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                toggleLike(photoItem, photo, likeIcon);
            });
            
            // Lightbox on click
            photoItem.addEventListener('click', function() {
                openLightbox('photo', photo.id);
            });
        }
        
        // Toggle like
        function toggleLike(item, media, likeIcon) {
            const mediaType = item.getAttribute('data-type');
            const mediaId = item.getAttribute('data-id');
            const likeKey = `${mediaType}-${mediaId}`;
            
            if (likedItems[likeKey]) {
                // Unlike
                likedItems[likeKey] = false;
                likeIcon.className = 'far fa-heart';
                item.querySelector('.like').classList.remove('liked');
                media.likes--;
            } else {
                // Like
                likedItems[likeKey] = true;
                likeIcon.className = 'fas fa-heart';
                item.querySelector('.like').classList.add('liked');
                likeIcon.classList.add('like-animation');
                media.likes++;
                
                setTimeout(() => {
                    likeIcon.classList.remove('like-animation');
                }, 600);
            }
            
            // Save to localStorage
            localStorage.setItem('portfolioLikes', JSON.stringify(likedItems));
        }
        
        // Download media with progress simulation
        function downloadMedia(src, title) {
            downloadProgress.classList.add('active');
            progressFill.style.width = '0%';
            progressText.textContent = 'Preparing download...';
            
            // Simulate download progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    
                    progressFill.style.width = '100%';
                    progressText.textContent = 'Download complete!';
                    
                    // Create temporary link for download
                    const link = document.createElement('a');
                    link.href = src;
                    link.download = `${title.replace(/\s+/g, '_')}.${src.split('.').pop()}`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    // Hide progress after delay
                    setTimeout(() => {
                        downloadProgress.classList.remove('active');
                    }, 2000);
                } else {
                    progressFill.style.width = `${progress}%`;
                    progressText.textContent = `Downloading... ${Math.round(progress)}%`;
                }
            }, 200);
        }
        
        // Load videos
        function loadVideos() {
            const startIndex = 0;
            const endIndex = Math.min(itemsPerPage, videosData.length);
            const videosToShow = videosData.slice(startIndex, endIndex);
            
            renderVideos(videosToShow);
            
            // Hide load more button if all videos are loaded
            if (endIndex >= videosData.length) {
                loadMoreVideosBtn.style.display = 'none';
            } else {
                loadMoreVideosBtn.style.display = 'block';
            }
        }
        
        // Load more videos
        function loadMoreVideos() {
            currentVideosPage++;
            const startIndex = (currentVideosPage - 1) * itemsPerPage;
            const endIndex = Math.min(currentVideosPage * itemsPerPage, videosData.length);
            const videosToShow = videosData.slice(startIndex, endIndex);
            
            renderVideos(videosToShow, true);
            
            // Hide load more button if all videos are loaded
            if (endIndex >= videosData.length) {
                loadMoreVideosBtn.style.display = 'none';
            }
        }
        
        // Render videos to grid
        function renderVideos(videos, append = false) {
            if (!append) {
                videosGrid.innerHTML = '';
            }
            
            videos.forEach(video => {
                const isLiked = likedItems[`video-${video.id}`] || false;
                const likeIcon = isLiked ? 'fas fa-heart' : 'far fa-heart';
                const likeClass = isLiked ? 'like liked' : 'like';
                
                const videoItem = document.createElement('div');
                videoItem.className = `video-item ${video.aspect}`;
                videoItem.setAttribute('data-id', video.id);
                videoItem.setAttribute('data-type', 'video');
                videoItem.setAttribute('data-category', video.category);
                videoItem.innerHTML = `
                    <video class="video-player" poster="${video.poster}" preload="metadata">
                        <source src="${video.src}" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <div class="video-info">
                        <h4>${video.title}</h4>
                        <p>${video.description}</p>
                    </div>
                    <div class="video-controls">
                        <button class="play-btn">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="volume-btn">
                            <i class="fas fa-volume-up"></i>
                        </button>
                        <button class="action-btn ${likeClass}" title="Like">
                            <i class="${likeIcon}"></i>
                        </button>
                        <button class="action-btn download" title="Download">
                            <i class="fas fa-download"></i>
                        </button>
                    </div>
                `;
                videosGrid.appendChild(videoItem);
                
                // Add event listeners for video controls
                setupVideoControls(videoItem, video);
            });
        }
        
        // Setup video controls
        function setupVideoControls(videoItem, video) {
            const videoEl = videoItem.querySelector('video');
            const playBtn = videoItem.querySelector('.play-btn');
            const volumeBtn = videoItem.querySelector('.volume-btn');
            const downloadBtn = videoItem.querySelector('.download');
            const likeBtn = videoItem.querySelector('.like');
            const likeIcon = likeBtn.querySelector('i');
            
            // Play/Pause functionality
            playBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                toggleVideoPlay(videoEl, playBtn);
            });
            
            // Volume toggle
            volumeBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                toggleVideoVolume(videoEl, volumeBtn);
            });
            
            // Download functionality
            downloadBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                downloadMedia(video.src, video.title);
            });
            
            // Like functionality
            likeBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                toggleLike(videoItem, video, likeIcon);
            });
            
            // Click on video to play/pause
            videoItem.addEventListener('click', function() {
                toggleVideoPlay(videoEl, playBtn);
            });
            
            // Lightbox on double click
            videoItem.addEventListener('dblclick', function() {
                openLightbox('video', video.id);
            });
            
            // Update play button when video ends
            videoEl.addEventListener('ended', function() {
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
                currentlyPlayingVideo = null;
            });
        }
        
        // Toggle video play state
        function toggleVideoPlay(video, playBtn) {
            // Pause currently playing video if any
            if (currentlyPlayingVideo && currentlyPlayingVideo !== video) {
                currentlyPlayingVideo.pause();
                const otherPlayBtn = currentlyPlayingVideo.parentElement.querySelector('.play-btn');
                if (otherPlayBtn) {
                    otherPlayBtn.innerHTML = '<i class="fas fa-play"></i>';
                }
            }
            
            if (video.paused) {
                video.play();
                playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                currentlyPlayingVideo = video;
            } else {
                video.pause();
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
                currentlyPlayingVideo = null;
            }
        }
        
        // Toggle video volume
        function toggleVideoVolume(video, volumeBtn) {
            if (video.muted) {
                video.muted = false;
                volumeBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
            } else {
                video.muted = true;
                volumeBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
            }
        }
        
        // Open lightbox
        function openLightbox(type, id) {
            currentLightboxItems = type === 'photo' ? photosData : videosData;
            currentLightboxIndex = currentLightboxItems.findIndex(item => item.id === id);
            
            if (currentLightboxIndex !== -1) {
                showLightboxMedia(currentLightboxItems[currentLightboxIndex]);
                lightbox.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        // Close lightbox
        function closeLightbox() {
            lightbox.classList.remove('active');
            document.body.style.overflow = '';
            
            // Pause video if playing in lightbox
            const lightboxVideo = lightboxMedia.querySelector('video');
            if (lightboxVideo) {
                lightboxVideo.pause();
            }
        }
        
        // Show previous media in lightbox
        function showPrevMedia() {
            currentLightboxIndex = (currentLightboxIndex - 1 + currentLightboxItems.length) % currentLightboxItems.length;
            showLightboxMedia(currentLightboxItems[currentLightboxIndex]);
        }
        
        // Show next media in lightbox
        function showNextMedia() {
            currentLightboxIndex = (currentLightboxIndex + 1) % currentLightboxItems.length;
            showLightboxMedia(currentLightboxItems[currentLightboxIndex]);
        }
        
        // Show media in lightbox
        function showLightboxMedia(media) {
            lightboxMedia.innerHTML = '';
            
            if (media.src.includes('.mp4')) {
                // Video
                const video = document.createElement('video');
                video.className = 'video-player';
                video.controls = true;
                video.autoplay = true;
                video.innerHTML = `
                    <source src="${media.src}" type="video/mp4">
                    Your browser does not support the video tag.
                `;
                lightboxMedia.appendChild(video);
            } else {
                // Image
                const img = document.createElement('img');
                img.src = media.src;
                img.alt = media.title;
                lightboxMedia.appendChild(img);
            }
            
            // Update lightbox info
            lightboxTitle.textContent = media.title;
            lightboxDescription.textContent = media.description;
            lightboxCategory.textContent = media.category.charAt(0).toUpperCase() + media.category.slice(1);
            lightboxDate.textContent = new Date(media.date).toLocaleDateString();
        }
        
        // Initialize the portfolio when DOM is loaded
        initPortfolio();
        
        // Reapply masonry layout on window resize
        window.addEventListener('resize', applyMasonryLayout);
    });
</script>
        <!-- My Booking Section -->
        <section id="mybooking" class="section">
            <div class="container">
                <div class="section-title">
                    <h2>My Bookings</h2>
                    <p>View and manage your photography bookings</p>
                </div>
                <div class="table-container">
                    <table id="bookings-table">
                        <thead>
                            <tr>
                                <th>Service</th>
                                <th>Date</th>
                                <th>Time</th>
                                <th>Location</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="bookings-body">
                            <!-- Bookings will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profile" class="section">
            <div class="container">
                <div class="section-title">
                    <h2>My Profile</h2>
                    <p>Manage your account information</p>
                </div>
                <div class="profile-container">
                    <div class="profile-header">
                        <img src="" alt="Profile Photo" class="profile-photo-large" id="profile-photo-large">
                        <div class="profile-info">
                            <h2 id="profile-name">-</h2>
                            <p id="profile-email">-</p>
                            <p id="profile-phone">-</p>
                            <input type="file" id="profile-photo-input" accept="image/*" style="display: none;">
                            <button class="edit-btn" id="upload-photo-btn">Upload Photo</button>
                        </div>
                    </div>
                    <div class="profile-details">
                        <div class="detail-item">
                            <span class="detail-label">Full Name</span>
                            <span class="detail-value" id="profile-fullname">-</span>
                            <button class="edit-btn" data-field="fullName">Edit</button>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Email</span>
                            <span class="detail-value" id="profile-email-display">-</span>
                            <button class="edit-btn" data-field="email" disabled>Edit</button>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Phone</span>
                            <span class="detail-value" id="profile-phone-display">-</span>
                            <button class="edit-btn" data-field="phone">Edit</button>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Address</span>
                            <span class="detail-value" id="profile-address">-</span>
                            <button class="edit-btn" data-field="address">Edit</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Login Section -->
        <section id="login" class="section">
            <div class="container">
                <div class="auth-container">
                    <h2 class="auth-title">Login to Your Account</h2>
                    <form id="login-form">
                        <div class="form-group">
                            <label for="login-email">Email Address</label>
                            <input type="email" id="login-email" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="login-password">Password</label>
                            <input type="password" id="login-password" class="form-control" required>
                        </div>
                        <button type="submit" class="submit-btn" style="width: 100%;">Login</button>
                        <div class="form-footer">
                            <p>Don't have an account? <a href="#" class="nav-link" data-section="signup">Sign up here</a></p>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Signup Section -->
        <section id="signup" class="section">
            <div class="container">
                <div class="auth-container">
                    <h2 class="auth-title">Create Your Account</h2>
                    <form id="signup-form">
                        <div class="form-group">
                            <label for="signup-name">Full Name</label>
                            <input type="text" id="signup-name" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="signup-address">Address</label>
                            <input type="text" id="signup-address" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="signup-phone">Phone Number</label>
                            <input type="tel" id="signup-phone" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="signup-email">Email Address</label>
                            <input type="email" id="signup-email" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="signup-password">Password</label>
                            <input type="password" id="signup-password" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="signup-confirm">Confirm Password</label>
                            <input type="password" id="signup-confirm" class="form-control" required>
                        </div>
                        <button type="submit" class="submit-btn" style="width: 100%;">Sign Up</button>
                        <div class="form-footer">
                            <p>Already have an account? <a href="#" class="nav-link" data-section="login">Login here</a></p>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Booking Form Section -->
        <section id="booking-form" class="section">
            <div class="container">
                <div class="section-title">
                    <h2>Book Your Photography Session</h2>
                    <p>Select services and provide booking details</p>
                </div>
                <div class="booking-form">
                    <form id="booking-details-form">
                        <div class="form-group">
                            <h3>Select Services</h3>
                            <div class="service-options" id="service-options">
                                <!-- Service options will be loaded dynamically -->
                            </div>
                        </div>
                        
                        <div class="total-price">
                            Total: $<span id="total-amount">0</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="booking-date">Preferred Date</label>
                            <input type="date" id="booking-date" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="booking-time">Preferred Time</label>
                            <input type="time" id="booking-time" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="booking-location">Location</label>
                            <input type="text" id="booking-location" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="special-requests">Special Requests</label>
                            <textarea id="special-requests" class="form-control" rows="3"></textarea>
                        </div>
                        <button type="submit" class="submit-btn" style="width: 100%;">Book Now</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Admin Dashboard -->
        <section id="admin" class="section admin-panel">
            <div class="admin-header">
                <div class="container">
                    <div class="header-content">
                        <div class="logo">Admin<span>Dashboard</span></div>
                        <button id="admin-logout" class="profile-btn"><i class="fas fa-sign-out-alt"></i> Logout</button>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="total-users">0</div>
                        <div class="stat-label">Total Users</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-bookings">0</div>
                        <div class="stat-label">Total Bookings</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pending-bookings">0</div>
                        <div class="stat-label">Pending Bookings</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-revenue">$0</div>
                        <div class="stat-label">Total Revenue</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="visit-count">0</div>
                        <div class="stat-label">Website Visits</div>
                    </div>
                </div>
                
                <div class="admin-nav">
                    <button class="admin-nav-btn active" data-section="admin-bookings">Manage Bookings</button>
                    <button class="admin-nav-btn" data-section="admin-users">Manage Users</button>
                    <button class="admin-nav-btn" data-section="admin-messages">Contact Messages</button>
                    <button class="admin-nav-btn" data-section="admin-services">Manage Services</button>
                    <button class="admin-nav-btn" data-section="admin-carousel">Carousel Images</button>
                </div>
                
                <!-- Admin Bookings Section -->
                <div id="admin-bookings" class="admin-section active">
                    <h3>All Bookings</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>User Name</th>
                                    <th>Phone</th>
                                    <th>Email</th>
                                    <th>Service</th>
                                    <th>Date</th>
                                    <th>Time</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-bookings-body">
                                <!-- Admin bookings will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Admin Users Section -->
                <div id="admin-users" class="admin-section">
                    <h3>User Accounts</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Address</th>
                                    <th>Join Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-users-body">
                                <!-- Users will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Admin Messages Section -->
                <div id="admin-messages" class="admin-section">
                    <h3>Contact Messages</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Message</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-messages-body">
                                <!-- Messages will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Admin Services Section -->
                <div id="admin-services" class="admin-section">
                    <h3>Manage Services</h3>
                    <button class="admin-nav-btn" id="add-service-btn" style="margin-bottom: 1rem;">Add New Service</button>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Description</th>
                                    <th>Price</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-services-body">
                                <!-- Services will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Admin Carousel Section -->
                <div id="admin-carousel" class="admin-section">
                    <h3>Carousel Images (Max 4)</h3>
                    <button class="admin-nav-btn" id="add-carousel-btn" style="margin-bottom: 1rem;">Add New Image</button>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Image</th>
                                    <th>Title</th>
                                    <th>Description</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-carousel-body">
                                <!-- Carousel images will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Toast Messages -->
    <div class="toast-container"></div>

    <!-- Footer -->
    <footer id="main-footer">
        <div class="container">
            <div class="footer-content">
                <div class="logo">Capture<span>Moments</span></div>
                <p>Professional photography services for all your special occasions</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-pinterest"></i></a>
                </div>
                <p class="copyright">&copy; 2023 Capture Moments. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
  // API Base URL - Auto-detect based on current host
const API_BASE = '/api';

// DOM Elements
const sections = document.querySelectorAll('.section');
const navLinks = document.querySelectorAll('.nav-link, .nav-item');
const mobileNavItems = document.querySelectorAll('.nav-item');
const carouselInner = document.getElementById('carousel-inner');
const carouselIndicators = document.getElementById('carousel-indicators');
const prevBtn = document.querySelector('.carousel-control.prev');
const nextBtn = document.querySelector('.carousel-control.next');
const loginForm = document.getElementById('login-form');
const signupForm = document.getElementById('signup-form');
const contactForm = document.getElementById('contact-form');
const bookingForm = document.getElementById('booking-details-form');
const adminLogoutBtn = document.getElementById('admin-logout');
const adminPanel = document.getElementById('admin');
const adminNavBtns = document.querySelectorAll('.admin-nav-btn');
const adminSections = document.querySelectorAll('.admin-section');
const toastContainer = document.querySelector('.toast-container');
const moreServicesBtn = document.getElementById('more-services-btn');
const servicesGrid = document.getElementById('services-grid');
const serviceOptionsContainer = document.getElementById('service-options');
const totalAmount = document.getElementById('total-amount');
const bookingsBody = document.getElementById('bookings-body');
const adminBookingsBody = document.getElementById('admin-bookings-body');
const adminUsersBody = document.getElementById('admin-users-body');
const adminMessagesBody = document.getElementById('admin-messages-body');
const adminCarouselBody = document.getElementById('admin-carousel-body');
const adminServicesBody = document.getElementById('admin-services-body');
const mainHeader = document.getElementById('main-header');
const mainFooter = document.getElementById('main-footer');
const mobileNav = document.getElementById('mobile-nav');
const profileDropdown = document.getElementById('profile-dropdown');
const profileText = document.getElementById('profile-text');
const myMessagesBtn = document.getElementById('my-messages-btn');
const userMessages = document.getElementById('user-messages');
const messagesList = document.getElementById('messages-list');
const profilePhotoInput = document.getElementById('profile-photo-input');
const uploadPhotoBtn = document.getElementById('upload-photo-btn');
const profilePhotoLarge = document.getElementById('profile-photo-large');
const addServiceBtn = document.getElementById('add-service-btn');
const addCarouselBtn = document.getElementById('add-carousel-btn');
const editBtns = document.querySelectorAll('.edit-btn');

// Current section and carousel index
let currentSection = 'home';
let currentCarouselIndex = 0;
let isLoggedIn = false;
let isAdmin = false;
let userData = null;
let authToken = null;
let servicesVisible = 9; // Show first 9 services initially
let allServices = [];

// Service prices (will be loaded from database)
let servicePrices = {};

// Navigation
function showSection(sectionId) {
    console.log('Showing section:', sectionId);
    
    sections.forEach(section => {
        section.classList.remove('active');
    });
    
    document.getElementById(sectionId).classList.add('active');
    currentSection = sectionId;
    
    // Update active nav items
    navLinks.forEach(link => {
        if (link.getAttribute('data-section') === sectionId) {
            link.classList.add('active');
        } else {
            link.classList.remove('active');
        }
    });
    
    // For mobile nav, update active state
    mobileNavItems.forEach(item => {
        if (item.getAttribute('data-section') === sectionId) {
            item.classList.add('active');
        } else {
            item.classList.remove('active');
        }
    });
    
    // Scroll to top of section
    window.scrollTo(0, 0);
    
    // Check if user needs to be logged in for this section
    const protectedSections = ['profile', 'mybooking', 'booking-form'];
    if (protectedSections.includes(sectionId) && !isLoggedIn) {
        showSection('login');
        showToast('Please login to access this section', 'warning');
        return;
    }
    
    // Load data for specific sections
    if (sectionId === 'mybooking') {
        loadUserBookings();
    } else if (sectionId === 'admin') {
        loadAdminData();
    } else if (sectionId === 'profile') {
        loadUserProfile();
    } else if (sectionId === 'home') {
        loadServices();
        loadCarousel();
    }
}

// Carousel functionality
let carouselItems = [];
let carouselInterval;

function updateCarousel() {
    if (carouselItems.length === 0) return;
    
    carouselInner.style.transform = `translateX(-${currentCarouselIndex * 100}%)`;
    
    const indicators = document.querySelectorAll('.indicator');
    indicators.forEach((indicator, index) => {
        if (index === currentCarouselIndex) {
            indicator.classList.add('active');
        } else {
            indicator.classList.remove('active');
        }
    });
}

function nextSlide() {
    if (carouselItems.length === 0) return;
    currentCarouselIndex = (currentCarouselIndex + 1) % carouselItems.length;
    updateCarousel();
}

function prevSlide() {
    if (carouselItems.length === 0) return;
    currentCarouselIndex = (currentCarouselIndex - 1 + carouselItems.length) % carouselItems.length;
    updateCarousel();
}

function startCarousel() {
    clearInterval(carouselInterval);
    carouselInterval = setInterval(nextSlide, 5000);
}

function stopCarousel() {
    clearInterval(carouselInterval);
}

// Load carousel from database
async function loadCarousel() {
    try {
        const carouselData = await apiRequest('/carousel');
        carouselInner.innerHTML = '';
        carouselIndicators.innerHTML = '';
        carouselItems = carouselData;

        if (carouselData.length === 0) {
            // Add default carousel items
            const defaultCarousel = [
                {
                    image: 'https://images.unsplash.com/photo-1542038784456-1ea8e935640e?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                    title: 'Wedding Photography',
                    description: 'Capture your special day with our professional wedding photography services'
                },
                {
                    image: 'https://images.unsplash.com/photo-1511895426328-dc8714191300?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                    title: 'Portrait Sessions',
                    description: 'Professional portrait photography for individuals and families'
                },
                {
                    image: 'https://images.unsplash.com/photo-1521334884684-d80222895322?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                    title: 'Event Photography',
                    description: 'Document your corporate events, parties, and special occasions'
                },
                {
                    image: 'https://images.unsplash.com/photo-1516035069371-29a1b244cc32?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                    title: 'Commercial Photography',
                    description: 'High-quality product and commercial photography for businesses'
                }
            ];

            carouselData.push(...defaultCarousel);
        }

        carouselData.forEach((item, index) => {
            // Create carousel item
            const carouselItem = document.createElement('div');
            carouselItem.className = 'carousel-item';
            carouselItem.style.backgroundImage = `url('${item.image}')`;
            carouselItem.innerHTML = `
                <div class="carousel-content">
                    <h2>${item.title}</h2>
                    <p>${item.description}</p>
                    <button class="book-btn open-booking">Book Now</button>
                </div>
            `;
            carouselInner.appendChild(carouselItem);

            // Create indicator
            const indicator = document.createElement('span');
            indicator.className = `indicator ${index === 0 ? 'active' : ''}`;
            indicator.addEventListener('click', () => {
                currentCarouselIndex = index;
                updateCarousel();
                startCarousel();
            });
            carouselIndicators.appendChild(indicator);
        });

        // Update carousel items reference
        carouselItems = document.querySelectorAll('.carousel-item');
        currentCarouselIndex = 0;
        updateCarousel();
        startCarousel();
    } catch (error) {
        console.error('Failed to load carousel:', error);
    }
}

// Toast messages (2 seconds only)
function showToast(message, type = 'info') {
    const toast = document.createElement('div');
    toast.className = `toast toast-${type}`;
    
    let icon = 'fas fa-info-circle';
    if (type === 'success') icon = 'fas fa-check-circle';
    if (type === 'error') icon = 'fas fa-exclamation-circle';
    if (type === 'warning') icon = 'fas fa-exclamation-triangle';
    
    toast.innerHTML = `
        <i class="${icon}"></i>
        <span>${message}</span>
    `;
    
    toastContainer.appendChild(toast);
    
    setTimeout(() => {
        toast.classList.add('show');
    }, 100);
    
    setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => {
            toast.remove();
        }, 300);
    }, 2000);
}

// API Request Helper
async function apiRequest(url, options = {}) {
    try {
        const response = await fetch(`${API_BASE}${url}`, {
            headers: {
                'Content-Type': 'application/json',
                ...(authToken && { 'Authorization': `Bearer ${authToken}` }),
                ...options.headers
            },
            ...options
        });

        const data = await response.json();
        
        if (!response.ok) {
            throw new Error(data.error || 'Something went wrong');
        }
        
        return data;
    } catch (error) {
        console.error('API Request failed:', error);
        throw error;
    }
}

// Login functionality
async function login(email, password) {
    try {
        const data = await apiRequest('/login', {
            method: 'POST',
            body: JSON.stringify({ email, password })
        });

        isLoggedIn = true;
        userData = data.user;
        authToken = data.token;

        if (userData.role === 'admin') {
            isAdmin = true;
            showAdminPanel();
            showToast('Admin login successful!', 'success');
        } else {
            isAdmin = false;
            showSection('home');
            showToast('Login successful!', 'success');
            updateProfileDropdown();
        }
        
        // Save token to sessionStorage
        sessionStorage.setItem('authToken', authToken);
    } catch (error) {
        showToast(error.message || 'Invalid email or password', 'error');
    }
}

// Update profile dropdown based on login status
function updateProfileDropdown() {
    console.log('Updating profile dropdown, isLoggedIn:', isLoggedIn);
    
    if (isLoggedIn && userData) {
        profileText.textContent = userData.fullName?.split(' ')[0] || 'Profile';
        
        // Update profile photo in header
        const profilePhoto = document.getElementById('profile-photo');
        if (userData.profilePhoto) {
            profilePhoto.src = userData.profilePhoto;
            profilePhoto.style.display = 'block';
        } else {
            profilePhoto.src = 'https://via.placeholder.com/35x35?text=U';
            profilePhoto.style.display = 'block';
        }
        
        profileDropdown.innerHTML = `
            <a href="#" class="nav-link dropdown-link" data-section="profile">
                <i class="fas fa-user" style="margin-right: 8px;"></i>Profile
            </a>
            <a href="#" class="nav-link dropdown-link" data-section="mybooking">
                <i class="fas fa-calendar-check" style="margin-right: 8px;"></i>My Bookings
            </a>
            <a href="#" id="logout-btn" class="dropdown-link">
                <i class="fas fa-sign-out-alt" style="margin-right: 8px;"></i>Logout
            </a>
        `;
        
        // Add event listeners to dropdown links
        document.querySelectorAll('.dropdown-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const section = link.getAttribute('data-section');
                if (section) {
                    showSection(section);
                } else if (link.id === 'logout-btn') {
                    logout();
                }
            });
        });
    } else {
        profileText.textContent = 'Account';
        profileDropdown.innerHTML = `
            <a href="#" class="nav-link dropdown-link" data-section="login">
                <i class="fas fa-sign-in-alt" style="margin-right: 8px;"></i>Login
            </a>
            <a href="#" class="nav-link dropdown-link" data-section="signup">
                <i class="fas fa-user-plus" style="margin-right: 8px;"></i>Sign Up
            </a>
        `;
        
        // Add event listeners to dropdown links
        document.querySelectorAll('.dropdown-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const section = link.getAttribute('data-section');
                showSection(section);
            });
        });
        
        // Hide profile photo
        document.getElementById('profile-photo').style.display = 'none';
    }
}

// Show admin panel
function showAdminPanel() {
    // Hide main header, footer and mobile nav
    mainHeader.style.display = 'none';
    mainFooter.style.display = 'none';
    mobileNav.style.display = 'none';
    
    // Show admin panel
    adminPanel.style.display = 'block';
    showSection('admin');
}

// Hide admin panel
function hideAdminPanel() {
    // Show main header, footer and mobile nav
    mainHeader.style.display = 'block';
    mainFooter.style.display = 'block';
    mobileNav.style.display = 'flex';
    
    // Hide admin panel
    adminPanel.style.display = 'none';
}

// Logout functionality
function logout() {
    isLoggedIn = false;
    isAdmin = false;
    userData = null;
    authToken = null;
    
    // Clear session storage
    sessionStorage.removeItem('authToken');
    
    if (currentSection === 'admin') {
        hideAdminPanel();
    }
    
    showSection('home');
    updateProfileDropdown();
    showToast('You have been logged out', 'info');
}

// Load user profile
async function loadUserProfile() {
    if (!userData) return;
    
    try {
        const profile = await apiRequest('/profile');
        document.getElementById('profile-name').textContent = profile.fullName;
        document.getElementById('profile-email').textContent = profile.email;
        document.getElementById('profile-phone').textContent = profile.phone;
        document.getElementById('profile-fullname').textContent = profile.fullName;
        document.getElementById('profile-email-display').textContent = profile.email;
        document.getElementById('profile-phone-display').textContent = profile.phone;
        document.getElementById('profile-address').textContent = profile.address;
        
        // Update profile photo preview
        if (profile.profilePhoto) {
            profilePhotoLarge.src = profile.profilePhoto;
        } else {
            profilePhotoLarge.src = 'https://via.placeholder.com/120x120?text=No+Photo';
        }
    } catch (error) {
        showToast('Failed to load profile', 'error');
    }
}

// Load user bookings
async function loadUserBookings() {
    if (!userData) return;
    
    try {
        const bookings = await apiRequest('/my-bookings');
        bookingsBody.innerHTML = '';
        
        if (bookings.length === 0) {
            bookingsBody.innerHTML = '<tr><td colspan="7" style="text-align: center;">No bookings found</td></tr>';
            return;
        }
        
        bookings.forEach(booking => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${booking.services.join(', ')}</td>
                <td>${new Date(booking.date).toLocaleDateString()}</td>
                <td>${booking.time}</td>
                <td>${booking.location}</td>
                <td>$${booking.amount}</td>
                <td><span class="status status-${booking.status}">${booking.status}</span></td>
                <td>
                    ${booking.status === 'pending' ? 
                        `<button class="action-btn delete-btn delete-booking" data-id="${booking._id}"><i class="fas fa-trash"></i></button>` : 
                        ''
                    }
                    ${booking.status === 'confirmed' || booking.status === 'completed' ? 
                        `<button class="track-btn">Track</button>` : 
                        ''
                    }
                </td>
            `;
            bookingsBody.appendChild(row);
        });
        
        // Add event listeners to delete buttons
        document.querySelectorAll('.delete-booking').forEach(btn => {
            btn.addEventListener('click', function() {
                const bookingId = this.getAttribute('data-id');
                deleteBooking(bookingId);
            });
        });
        
        // Add event listeners to track buttons
        document.querySelectorAll('.track-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                showToast('Please contact us for tracking details', 'info');
            });
        });
    } catch (error) {
        showToast('Failed to load bookings', 'error');
    }
}

// Delete booking
async function deleteBooking(bookingId) {
    if (confirm('Are you sure you want to delete this booking?')) {
        try {
            await apiRequest(`/bookings/${bookingId}`, {
                method: 'DELETE'
            });
            loadUserBookings();
            showToast('Booking deleted successfully', 'success');
        } catch (error) {
            showToast('Failed to delete booking', 'error');
        }
    }
}

// Load services
async function loadServices() {
    try {
        const services = await apiRequest('/services');
        allServices = services;
        renderServices();
        renderServiceOptions();
    } catch (error) {
        console.error('Failed to load services:', error);
    }
}

// Render services in home section
function renderServices() {
    servicesGrid.innerHTML = '';
    servicePrices = {};
    
    const servicesToShow = allServices.slice(0, servicesVisible);
    
    servicesToShow.forEach(service => {
        const serviceKey = service.name.toLowerCase().replace(/\s+/g, '');
        servicePrices[serviceKey] = service.price;
        
        const serviceCard = document.createElement('div');
        serviceCard.className = 'service-card';
        serviceCard.innerHTML = `
            <div class="service-img" style="background-image: url('${service.image || 'https://images.unsplash.com/photo-1511285560929-80b456fea0bc?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80'}');"></div>
            <div class="service-info">
                <h4>${service.name} ${service.isNew ? '<span class="new-badge">NEW</span>' : ''}</h4>
                <p>${service.description}</p>
                <p><strong>Price: $${service.price}</strong></p>
                <button class="book-btn open-booking">Book Now</button>
            </div>
        `;
        servicesGrid.appendChild(serviceCard);
    });
    
    // Update show more/less button text
    if (allServices.length <= 9) {
        moreServicesBtn.style.display = 'none';
    } else {
        moreServicesBtn.style.display = 'block';
        moreServicesBtn.textContent = servicesVisible >= allServices.length ? 'Show Less Services' : 'Show More Services';
    }
    
    // Add event listeners to new book buttons
    document.querySelectorAll('.open-booking').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.preventDefault();
            if (!isLoggedIn) {
                showToast('Please login to book services', 'warning');
                showSection('login');
            } else if (userData.role === 'admin') {
                showToast('Admin cannot book services', 'warning');
            } else {
                showSection('booking-form');
            }
        });
    });
}

// Render service options in booking form
function renderServiceOptions() {
    serviceOptionsContainer.innerHTML = '';
    
    allServices.forEach(service => {
        const serviceKey = service.name.toLowerCase().replace(/\s+/g, '');
        const serviceOption = document.createElement('div');
        serviceOption.className = 'service-option';
        serviceOption.setAttribute('data-service', serviceKey);
        serviceOption.setAttribute('data-price', service.price);
        serviceOption.innerHTML = `
            <input type="checkbox" class="service-checkbox" id="${serviceKey}" name="service" value="${serviceKey}">
            <div class="service-details">
                <div class="service-name">${service.name} ${service.isNew ? '<span class="new-badge">NEW</span>' : ''}</div>
                <div class="service-description">${service.description}</div>
                <div class="service-price">$${service.price}</div>
            </div>
        `;
        serviceOptionsContainer.appendChild(serviceOption);
    });
    
    // Add event listeners to service options
    document.querySelectorAll('.service-option').forEach(option => {
        option.addEventListener('click', (e) => {
            if (e.target.type !== 'checkbox') {
                const checkbox = option.querySelector('.service-checkbox');
                checkbox.checked = !checkbox.checked;
                option.classList.toggle('selected', checkbox.checked);
                calculateTotal();
            }
        });
        
        const checkbox = option.querySelector('.service-checkbox');
        checkbox.addEventListener('change', () => {
            option.classList.toggle('selected', checkbox.checked);
            calculateTotal();
        });
    });
}

// Toggle more services
function toggleMoreServices() {
    if (servicesVisible >= allServices.length) {
        servicesVisible = 9;
    } else {
        servicesVisible = allServices.length;
    }
    renderServices();
}

// Calculate total price
function calculateTotal() {
    let total = 0;
    document.querySelectorAll('.service-checkbox:checked').forEach(checkbox => {
        const service = checkbox.value;
        total += servicePrices[service] || 0;
    });
    totalAmount.textContent = total;
}

// Load user messages
async function loadUserMessages() {
    try {
        const messages = await apiRequest('/my-messages');
        displayUserMessages(messages);
    } catch (error) {
        showToast('Failed to load messages', 'error');
    }
}

// Display user messages
function displayUserMessages(messages) {
    messagesList.innerHTML = '';
    
    if (messages.length === 0) {
        messagesList.innerHTML = '<p style="text-align: center; color: #666;">No messages found</p>';
        return;
    }
    
    messages.forEach(message => {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message-item ${message.status}`;
        messageDiv.innerHTML = `
            <button class="delete-message" data-id="${message._id}"><i class="fas fa-trash"></i></button>
            <p><strong>Message:</strong> ${message.message}</p>
            <p><strong>Date:</strong> ${new Date(message.date).toLocaleDateString()}</p>
            <p><strong>Status:</strong> <span style="color: ${message.status === 'solved' ? 'green' : 'red'}">${message.status}</span></p>
            ${message.adminReply ? `
                <div style="margin-top: 0.5rem; padding: 0.5rem; background: white; border-radius: 3px;">
                    <strong>Admin Reply:</strong> ${message.adminReply}
                </div>
            ` : ''}
        `;
        messagesList.appendChild(messageDiv);
    });
    
    // Add event listeners to delete buttons
    document.querySelectorAll('.delete-message').forEach(btn => {
        btn.addEventListener('click', function() {
            const messageId = this.getAttribute('data-id');
            deleteUserMessage(messageId);
        });
    });
}

// Delete user message
async function deleteUserMessage(messageId) {
    if (confirm('Are you sure you want to delete this message?')) {
        try {
            await apiRequest(`/my-messages/${messageId}`, {
                method: 'DELETE'
            });
            loadUserMessages();
            showToast('Message deleted successfully', 'success');
        } catch (error) {
            showToast('Failed to delete message', 'error');
        }
    }
}

// Load admin data
async function loadAdminData() {
    try {
        // Load stats and data
        const [users, bookings, messages, services, carousel, visits] = await Promise.all([
            apiRequest('/admin/users'),
            apiRequest('/admin/bookings'),
            apiRequest('/admin/messages'),
            apiRequest('/services'),
            apiRequest('/carousel'),
            apiRequest('/visits')
        ]);

        // Update stats
        document.getElementById('total-users').textContent = users.length;
        document.getElementById('total-bookings').textContent = bookings.length;
        document.getElementById('pending-bookings').textContent = bookings.filter(b => b.status === 'pending').length;
        document.getElementById('total-revenue').textContent = '$' + bookings.reduce((total, booking) => total + booking.amount, 0);
        document.getElementById('visit-count').textContent = visits.count;
        
        // Load bookings
        adminBookingsBody.innerHTML = '';
        bookings.forEach(booking => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${booking.userId ? booking.userId.fullName : 'Unknown User'}</td>
                <td>${booking.userId ? booking.userId.phone : 'N/A'}</td>
                <td>${booking.userId ? booking.userId.email : 'N/A'}</td>
                <td>${booking.services.join(', ')}</td>
                <td>${new Date(booking.date).toLocaleDateString()}</td>
                <td>${booking.time}</td>
                <td>$${booking.amount}</td>
                <td>
                    <select class="form-control booking-status" data-id="${booking._id}">
                        <option value="pending" ${booking.status === 'pending' ? 'selected' : ''}>Pending</option>
                        <option value="confirmed" ${booking.status === 'confirmed' ? 'selected' : ''}>Confirmed</option>
                        <option value="completed" ${booking.status === 'completed' ? 'selected' : ''}>Completed</option>
                        <option value="rejected" ${booking.status === 'rejected' ? 'selected' : ''}>Rejected</option>
                    </select>
                </td>
                <td>
                    <button class="action-btn delete-btn delete-booking-admin" data-id="${booking._id}"><i class="fas fa-trash"></i></button>
                </td>
            `;
            adminBookingsBody.appendChild(row);
        });
        
        // Load users
        adminUsersBody.innerHTML = '';
        users.forEach(user => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${user.fullName}</td>
                <td>
                    <input type="email" class="form-control user-email" value="${user.email}" data-id="${user._id}" style="width: 100%;">
                </td>
                <td>${user.phone}</td>
                <td>${user.address}</td>
                <td>${new Date(user.createdAt).toLocaleDateString()}</td>
                <td>
                    <button class="action-btn save-email" data-id="${user._id}"><i class="fas fa-save"></i></button>
                    <button class="action-btn delete-btn delete-user" data-id="${user._id}"><i class="fas fa-trash"></i></button>
                </td>
            `;
            adminUsersBody.appendChild(row);
        });
        
        // Load messages
        adminMessagesBody.innerHTML = '';
        messages.forEach(message => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${message.name}</td>
                <td>${message.email}</td>
                <td>${message.phone}</td>
                <td>${message.message}</td>
                <td>
                    <select class="form-control message-status" data-id="${message._id}">
                        <option value="pending" ${message.status === 'pending' ? 'selected' : ''}>Pending</option>
                        <option value="solved" ${message.status === 'solved' ? 'selected' : ''}>Solved</option>
                    </select>
                </td>
                <td>
                    <button class="action-btn reply-message" data-id="${message._id}"><i class="fas fa-reply"></i></button>
                </td>
            `;
            adminMessagesBody.appendChild(row);
        });
        
        // Load services
        adminServicesBody.innerHTML = '';
        services.forEach(service => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${service.name}</td>
                <td>${service.description}</td>
                <td>$${service.price}</td>
                <td>${service.isNew ? '<span style="color: red;">NEW</span>' : 'Regular'}</td>
                <td>
                    <button class="action-btn delete-btn delete-service" data-id="${service._id}"><i class="fas fa-trash"></i></button>
                </td>
            `;
            adminServicesBody.appendChild(row);
        });
        
        // Load carousel
        adminCarouselBody.innerHTML = '';
        carousel.forEach(image => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>
                    <img src="${image.image}" alt="${image.title}" style="width: 100px; height: 60px; object-fit: cover;">
                </td>
                <td>${image.title}</td>
                <td>${image.description}</td>
                <td>
                    <button class="action-btn delete-btn delete-carousel" data-id="${image._id}"><i class="fas fa-trash"></i></button>
                </td>
            `;
            adminCarouselBody.appendChild(row);
        });
        
        // Add event listeners for status changes
        document.querySelectorAll('.booking-status').forEach(select => {
            select.addEventListener('change', function() {
                const bookingId = this.getAttribute('data-id');
                const newStatus = this.value;
                updateBookingStatus(bookingId, newStatus);
            });
        });
        
        document.querySelectorAll('.message-status').forEach(select => {
            select.addEventListener('change', function() {
                const messageId = this.getAttribute('data-id');
                const newStatus = this.value;
                updateMessageStatus(messageId, newStatus);
            });
        });
        
        // Add event listeners for reply buttons
        document.querySelectorAll('.reply-message').forEach(btn => {
            btn.addEventListener('click', function() {
                const messageId = this.getAttribute('data-id');
                const reply = prompt('Enter your reply:');
                if (reply) {
                    updateMessageReply(messageId, reply);
                }
            });
        });
        
        // Add event listeners for save email buttons
        document.querySelectorAll('.save-email').forEach(btn => {
            btn.addEventListener('click', function() {
                const userId = this.getAttribute('data-id');
                const emailInput = document.querySelector(`.user-email[data-id="${userId}"]`);
                const newEmail = emailInput.value;
                updateUserEmail(userId, newEmail);
            });
        });
        
        // Add event listeners for admin delete buttons
        document.querySelectorAll('.delete-booking-admin').forEach(btn => {
            btn.addEventListener('click', function() {
                const bookingId = this.getAttribute('data-id');
                deleteBookingAdmin(bookingId);
            });
        });
        
        document.querySelectorAll('.delete-user').forEach(btn => {
            btn.addEventListener('click', function() {
                const userId = this.getAttribute('data-id');
                deleteUserAdmin(userId);
            });
        });
        
        document.querySelectorAll('.delete-service').forEach(btn => {
            btn.addEventListener('click', function() {
                const serviceId = this.getAttribute('data-id');
                deleteService(serviceId);
            });
        });
        
        document.querySelectorAll('.delete-carousel').forEach(btn => {
            btn.addEventListener('click', function() {
                const carouselId = this.getAttribute('data-id');
                deleteCarousel(carouselId);
            });
        });
    } catch (error) {
        showToast('Failed to load admin data', 'error');
    }
}

// Update booking status
async function updateBookingStatus(bookingId, newStatus) {
    try {
        await apiRequest(`/admin/bookings/${bookingId}`, {
            method: 'PUT',
            body: JSON.stringify({ status: newStatus })
        });
        showToast('Booking status updated successfully', 'success');
    } catch (error) {
        showToast('Failed to update booking status', 'error');
    }
}

// Update message status
async function updateMessageStatus(messageId, newStatus) {
    try {
        await apiRequest(`/admin/messages/${messageId}`, {
            method: 'PUT',
            body: JSON.stringify({ status: newStatus })
        });
        showToast('Message status updated successfully', 'success');
    } catch (error) {
        showToast('Failed to update message status', 'error');
    }
}

// Update message reply
async function updateMessageReply(messageId, reply) {
    try {
        await apiRequest(`/admin/messages/${messageId}`, {
            method: 'PUT',
            body: JSON.stringify({ adminReply: reply, status: 'solved' })
        });
        showToast('Reply sent successfully', 'success');
    } catch (error) {
        showToast('Failed to send reply', 'error');
    }
}

// Update user email
async function updateUserEmail(userId, email) {
    try {
        await apiRequest(`/admin/users/${userId}/email`, {
            method: 'PUT',
            body: JSON.stringify({ email })
        });
        showToast('User email updated successfully', 'success');
    } catch (error) {
        showToast('Failed to update user email', 'error');
    }
}

// Delete user (admin)
async function deleteUserAdmin(userId) {
    if (confirm('Are you sure you want to delete this user? This will also delete all their bookings and messages.')) {
        try {
            await apiRequest(`/admin/users/${userId}`, {
                method: 'DELETE'
            });
            loadAdminData();
            showToast('User deleted successfully', 'success');
        } catch (error) {
            showToast('Failed to delete user', 'error');
        }
    }
}

// Delete booking (admin)
async function deleteBookingAdmin(bookingId) {
    if (confirm('Are you sure you want to delete this booking?')) {
        try {
            await apiRequest(`/admin/bookings/${bookingId}`, {
                method: 'DELETE'
            });
            loadAdminData();
            showToast('Booking deleted successfully', 'success');
        } catch (error) {
            showToast('Failed to delete booking', 'error');
        }
    }
}

// Delete service
async function deleteService(serviceId) {
    if (confirm('Are you sure you want to delete this service?')) {
        try {
            await apiRequest(`/admin/services/${serviceId}`, {
                method: 'DELETE'
            });
            loadAdminData();
            loadServices();
            showToast('Service deleted successfully', 'success');
        } catch (error) {
            showToast('Failed to delete service', 'error');
        }
    }
}

// Delete carousel image
async function deleteCarousel(carouselId) {
    if (confirm('Are you sure you want to delete this carousel image?')) {
        try {
            await apiRequest(`/admin/carousel/${carouselId}`, {
                method: 'DELETE'
            });
            loadAdminData();
            loadCarousel();
            showToast('Carousel image deleted successfully', 'success');
        } catch (error) {
            showToast('Failed to delete carousel image', 'error');
        }
    }
}

// Add new service (admin)
// Add new service (admin) - FIXED VERSION
// Fixed addNewService function
async function addNewService() {
    // Create and trigger file input first (user activation)
    const fileInput = document.createElement('input');
    fileInput.type = 'file';
    fileInput.accept = 'image/*';
    
    // First get the image file
    fileInput.onchange = async (e) => {
        if (e.target.files.length > 0) {
            const file = e.target.files[0];
            
            // Now get service details after file selection
            const name = prompt('Enter service name:');
            if (!name) return;
            
            const description = prompt('Enter service description:');
            if (!description) return;
            
            const priceInput = prompt('Enter service price (numbers only):');
            if (!priceInput) return;
            
            // Convert to number and validate
            const price = parseFloat(priceInput);
            if (isNaN(price) || price <= 0) {
                showToast('Please enter a valid price (numbers only)', 'error');
                return;
            }
            
            const formData = new FormData();
            formData.append('image', file);
            formData.append('name', name);
            formData.append('description', description);
            formData.append('price', price.toString());
            
            try {
                const response = await fetch(`${API_BASE}/admin/services`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: formData
                });
                
                const data = await response.json();
                if (response.ok) {
                    loadAdminData();
                    loadServices();
                    showToast('Service added successfully', 'success');
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                showToast('Failed to add service: ' + error.message, 'error');
            }
        }
    };
    
    // Trigger file input immediately after user click
    fileInput.click();
}
// Add carousel image (admin)
// Enhanced add carousel image function
async function addCarouselImage() {
    const title = prompt('Enter image title:');
    if (!title) return;
    
    const description = prompt('Enter image description:');
    if (!description) return;
    
    const fileInput = document.createElement('input');
    fileInput.type = 'file';
    fileInput.accept = 'image/*';
    
    fileInput.onchange = async (e) => {
        if (e.target.files.length > 0) {
            const file = e.target.files[0];
            
            // Validate file size (5MB limit)
            if (file.size > 5 * 1024 * 1024) {
                showToast('File too large. Maximum size is 5MB.', 'error');
                return;
            }
            
            // Validate file type
            if (!file.type.startsWith('image/')) {
                showToast('Please select an image file.', 'error');
                return;
            }
            
            const formData = new FormData();
            formData.append('image', file);
            formData.append('title', title);
            formData.append('description', description);
            
            try {
                const response = await fetch('/api/admin/carousel', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: formData
                });
                
                const data = await response.json();
                if (response.ok) {
                    loadAdminData();
                    loadCarousel();
                    showToast('Carousel image added successfully', 'success');
                } else {
                    throw new Error(data.error || 'Failed to upload image');
                }
            } catch (error) {
                showToast(error.message || 'Failed to add carousel image', 'error');
            }
        }
    };
    
    fileInput.click();
}

// Edit profile field
async function editProfileField(field) {
    if (field === 'email') {
        showToast('Email cannot be changed', 'warning');
        return;
    }
    
    const currentValue = document.getElementById(`profile-${field}`).textContent;
    const newValue = prompt(`Enter new ${field}:`, currentValue);
    
    if (newValue && newValue !== currentValue) {
        try {
            const updateData = { [field]: newValue };
            const response = await fetch(`${API_BASE}/profile`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${authToken}`
                },
                body: JSON.stringify(updateData)
            });
            
            const data = await response.json();
            if (response.ok) {
                // Update display
                document.getElementById(`profile-${field}`).textContent = newValue;
                document.getElementById(`profile-${field}-display`).textContent = newValue;
                userData[field] = newValue;
                showToast('Profile updated successfully', 'success');
            } else {
                throw new Error(data.error);
            }
        } catch (error) {
            showToast('Failed to update profile', 'error');
        }
    }
}

// Upload profile photo
async function uploadProfilePhoto(file) {
    const formData = new FormData();
    formData.append('profilePhoto', file);
    formData.append('fullName', userData.fullName);
    formData.append('address', userData.address);
    formData.append('phone', userData.phone);
    
    try {
        const response = await fetch(`${API_BASE}/profile`, {
            method: 'PUT',
            headers: {
                'Authorization': `Bearer ${authToken}`
            },
            body: formData
        });
        
        const data = await response.json();
        if (response.ok) {
            userData = data.user;
            updateProfileDisplay();
            showToast('Profile photo updated successfully', 'success');
        } else {
            throw new Error(data.error);
        }
    } catch (error) {
        showToast('Failed to upload photo', 'error');
    }
}

// Update profile display
function updateProfileDisplay() {
    // Update header profile photo
    const profilePhoto = document.getElementById('profile-photo');
    if (userData.profilePhoto) {
        profilePhoto.src = userData.profilePhoto;
        profilePhoto.style.display = 'block';
    } else {
        profilePhoto.src = 'https://via.placeholder.com/35x35?text=U';
        profilePhoto.style.display = 'block';
    }
    
    // Update profile section photo
    if (userData.profilePhoto) {
        profilePhotoLarge.src = userData.profilePhoto;
    } else {
        profilePhotoLarge.src = 'https://via.placeholder.com/120x120?text=No+Photo';
    }
}

// Event Listeners
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM loaded, initializing event listeners...');
    
    // Navigation links
    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const sectionId = link.getAttribute('data-section');
            console.log('Nav link clicked:', sectionId);
            showSection(sectionId);
        });
    });

    // Mobile navigation items
    mobileNavItems.forEach(item => {
        item.addEventListener('click', (e) => {
            e.preventDefault();
            const sectionId = item.getAttribute('data-section');
            console.log('Mobile nav clicked:', sectionId);
            showSection(sectionId);
        });
    });

    // Carousel controls
    prevBtn.addEventListener('click', () => {
        prevSlide();
        startCarousel();
    });

    nextBtn.addEventListener('click', () => {
        nextSlide();
        startCarousel();
    });

    // Auto advance carousel
    startCarousel();

    // Pause carousel on hover
    carouselInner.addEventListener('mouseenter', stopCarousel);
    carouselInner.addEventListener('mouseleave', startCarousel);

    // Login form
    loginForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;
        console.log('Login attempt:', email);
        await login(email, password);
    });

    // Signup form
    signupForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const fullName = document.getElementById('signup-name').value;
        const address = document.getElementById('signup-address').value;
        const phone = document.getElementById('signup-phone').value;
        const email = document.getElementById('signup-email').value;
        const password = document.getElementById('signup-password').value;
        const confirmPassword = document.getElementById('signup-confirm').value;
        
        if (password !== confirmPassword) {
            showToast('Passwords do not match', 'error');
            return;
        }
        
        console.log('Signup attempt:', email);
        
        try {
            await apiRequest('/register', {
                method: 'POST',
                body: JSON.stringify({
                    fullName,
                    email,
                    password,
                    address,
                    phone
                })
            });
            
            showToast('Account created successfully!', 'success');
            showSection('login');
            signupForm.reset();
        } catch (error) {
            showToast(error.message || 'Failed to create account', 'error');
        }
    });

    // Contact form
    contactForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const phone = document.getElementById('phone').value;
        const message = document.getElementById('message').value;
        
        try {
            await apiRequest('/contact', {
                method: 'POST',
                body: JSON.stringify({
                    name,
                    email,
                    phone,
                    message
                })
            });
            
            showToast('Message sent successfully!', 'success');
            contactForm.reset();
        } catch (error) {
            showToast('Failed to send message', 'error');
        }
    });

    // Booking form
    bookingForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        if (!userData) {
            showToast('Please login to book services', 'warning');
            showSection('login');
            return;
        }
        
        if (userData.role === 'admin') {
            showToast('Admin cannot book services', 'warning');
            return;
        }
        
        const selectedServices = Array.from(document.querySelectorAll('.service-checkbox:checked'))
            .map(checkbox => checkbox.value);
        
        if (selectedServices.length === 0) {
            showToast('Please select at least one service', 'error');
            return;
        }
        
        const date = document.getElementById('booking-date').value;
        const time = document.getElementById('booking-time').value;
        const location = document.getElementById('booking-location').value;
        const specialRequests = document.getElementById('special-requests').value;
        const amount = parseInt(totalAmount.textContent);
        
        try {
            await apiRequest('/bookings', {
                method: 'POST',
                body: JSON.stringify({
                    services: selectedServices,
                    date,
                    time,
                    location,
                    specialRequests,
                    amount
                })
            });
            
            showToast('Booking created successfully!', 'success');
            bookingForm.reset();
            calculateTotal();
            showSection('mybooking');
        } catch (error) {
            showToast('Failed to create booking', 'error');
        }
    });

    // Admin logout
    adminLogoutBtn.addEventListener('click', (e) => {
        e.preventDefault();
        logout();
    });

    // More services toggle
    moreServicesBtn.addEventListener('click', toggleMoreServices);

    // My Messages button
    myMessagesBtn.addEventListener('click', function() {
        userMessages.style.display = userMessages.style.display === 'none' ? 'block' : 'none';
        if (userMessages.style.display === 'block') {
            loadUserMessages();
        }
    });

    // Admin navigation
    adminNavBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const sectionId = this.getAttribute('data-section');
            
            // Update active button
            adminNavBtns.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            // Show corresponding section
            adminSections.forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
        });
    });

    // Add service button
    addServiceBtn.addEventListener('click', addNewService);

    // Add carousel button
    addCarouselBtn.addEventListener('click', addCarouselImage);

    // Profile photo upload
    uploadPhotoBtn.addEventListener('click', function() {
        profilePhotoInput.click();
    });

    profilePhotoInput.addEventListener('change', async function(e) {
        if (e.target.files.length > 0) {
            await uploadProfilePhoto(e.target.files[0]);
        }
    });

    // Edit profile buttons
    editBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const field = this.getAttribute('data-field');
            if (field) {
                editProfileField(field);
            }
        });
    });

    // Initialize the app
    updateProfileDropdown();

    // Check if user was previously logged in
    const savedToken = sessionStorage.getItem('authToken');
    if (savedToken) {
        authToken = savedToken;
        console.log('Found saved token, verifying...');
        // Verify token and get user data
        apiRequest('/profile')
            .then(profile => {
                isLoggedIn = true;
                userData = profile;
                console.log('User verified:', userData.fullName);
                if (userData.role === 'admin') {
                    isAdmin = true;
                    showAdminPanel();
                } else {
                    updateProfileDropdown();
                }
            })
            .catch(() => {
                // Token is invalid, clear it
                console.log('Token invalid, clearing...');
                sessionStorage.removeItem('authToken');
                authToken = null;
            });
    }

    // Load initial data
    loadServices();
    loadCarousel();
    
    console.log('Event listeners initialized successfully');
});


// Add logout button to profile section
function addLogoutToProfileSection() {
    const profileContainer = document.querySelector('.profile-container');
    if (profileContainer && !document.getElementById('profile-logout-btn')) {
        const logoutSection = document.createElement('div');
        logoutSection.style.marginTop = '2rem';
        logoutSection.style.paddingTop = '2rem';
        logoutSection.style.borderTop = '2px solid #eee';
        logoutSection.style.textAlign = 'center';
        
        logoutSection.innerHTML = `
            <h3 style="color: var(--danger); margin-bottom: 1rem;">
                <i class="fas fa-sign-out-alt" style="margin-right: 10px;"></i>
                Account Actions
            </h3>
            <button id="profile-logout-btn" class="submit-btn" style="background: var(--danger);">
                <i class="fas fa-sign-out-alt" style="margin-right: 8px;"></i>
                Logout from Account
            </button>
            <p style="color: var(--gray); font-size: 0.9rem; margin-top: 1rem;">
                You are logged in as: <strong>${userData?.email || 'Unknown'}</strong>
            </p>
        `;
        
        profileContainer.appendChild(logoutSection);
        
        // Add event listener to logout button
        document.getElementById('profile-logout-btn').addEventListener('click', showLogoutConfirmation);
    }
}

// Show attractive logout confirmation
function showLogoutConfirmation() {
    // Create modal overlay
    const modalOverlay = document.createElement('div');
    modalOverlay.style.position = 'fixed';
    modalOverlay.style.top = '0';
    modalOverlay.style.left = '0';
    modalOverlay.style.width = '100%';
    modalOverlay.style.height = '100%';
    modalOverlay.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
    modalOverlay.style.display = 'flex';
    modalOverlay.style.justifyContent = 'center';
    modalOverlay.style.alignItems = 'center';
    modalOverlay.style.zIndex = '2000';
    modalOverlay.style.backdropFilter = 'blur(5px)';
    
    // Create modal content
    const modalContent = document.createElement('div');
    modalContent.style.background = 'linear-gradient(135deg, #fff, #f8f9fa)';
    modalContent.style.padding = '2.5rem';
    modalContent.style.borderRadius = '15px';
    modalContent.style.boxShadow = '0 20px 40px rgba(0, 0, 0, 0.3)';
    modalContent.style.maxWidth = '450px';
    modalContent.style.width = '90%';
    modalContent.style.textAlign = 'center';
    modalContent.style.border = '2px solid var(--danger)';
    modalContent.style.position = 'relative';
    
    modalContent.innerHTML = `
        <div style="margin-bottom: 1.5rem;">
            <div style="width: 80px; height: 80px; background: var(--danger); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem; border: 4px solid #ffebee;">
                <i class="fas fa-sign-out-alt" style="font-size: 2rem; color: white;"></i>
            </div>
            <h2 style="color: var(--danger); margin-bottom: 0.5rem; font-family: \'Playfair Display\', serif;">Logout Confirmation</h2>
            <p style="color: var(--gray); margin-bottom: 0.5rem;">Are you sure you want to logout?</p>
            <p style="color: var(--dark); font-weight: 600; background: #fff3cd; padding: 0.8rem; border-radius: 8px; border-left: 4px solid var(--warning);">
                <i class="fas fa-envelope" style="margin-right: 8px; color: var(--warning);"></i>
                ${userData?.email || 'Unknown Email'}
            </p>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 2rem;">
            <button id="confirm-logout" style="background: var(--danger); color: white; border: none; padding: 1rem 1.5rem; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-check" style="margin-right: 8px;"></i>
                Yes, Logout
            </button>
            <button id="cancel-logout" style="background: var(--secondary); color: white; border: none; padding: 1rem 1.5rem; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-times" style="margin-right: 8px;"></i>
                Cancel
            </button>
        </div>
        
        <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid #eee;">
            <p style="color: var(--gray); font-size: 0.8rem;">
                <i class="fas fa-info-circle" style="margin-right: 5px;"></i>
                You can login again anytime with your email and password
            </p>
        </div>
    `;
    
    modalOverlay.appendChild(modalContent);
    document.body.appendChild(modalOverlay);
    
    // Add hover effects
    const confirmBtn = document.getElementById('confirm-logout');
    const cancelBtn = document.getElementById('cancel-logout');
    
    confirmBtn.addEventListener('mouseenter', () => {
        confirmBtn.style.transform = 'translateY(-2px)';
        confirmBtn.style.boxShadow = '0 5px 15px rgba(239, 71, 111, 0.4)';
    });
    
    confirmBtn.addEventListener('mouseleave', () => {
        confirmBtn.style.transform = 'translateY(0)';
        confirmBtn.style.boxShadow = 'none';
    });
    
    cancelBtn.addEventListener('mouseenter', () => {
        cancelBtn.style.transform = 'translateY(-2px)';
        cancelBtn.style.boxShadow = '0 5px 15px rgba(78, 205, 196, 0.4)';
    });
    
    cancelBtn.addEventListener('mouseleave', () => {
        cancelBtn.style.transform = 'translateY(0)';
        cancelBtn.style.boxShadow = 'none';
    });
    
    // Add event listeners
    confirmBtn.addEventListener('click', () => {
        document.body.removeChild(modalOverlay);
        logout();
    });
    
    cancelBtn.addEventListener('click', () => {
        document.body.removeChild(modalOverlay);
        showToast('Logout cancelled', 'info');
    });
    
    // Close modal when clicking outside
    modalOverlay.addEventListener('click', (e) => {
        if (e.target === modalOverlay) {
            document.body.removeChild(modalOverlay);
            showToast('Logout cancelled', 'info');
        }
    });
    
    // Add escape key listener
    const escapeHandler = (e) => {
        if (e.key === 'Escape') {
            document.body.removeChild(modalOverlay);
            document.removeEventListener('keydown', escapeHandler);
            showToast('Logout cancelled', 'info');
        }
    };
    document.addEventListener('keydown', escapeHandler);
}

// Update showSection function to include logout button in profile section
const originalShowSection = showSection;
showSection = function(sectionId) {
    originalShowSection(sectionId);
    
    // Add logout button to profile section when it's shown
    if (sectionId === 'profile' && isLoggedIn) {
        setTimeout(addLogoutToProfileSection, 100);
    }
};

// Update login function to handle profile section updates
const originalLogin = login;
login = async function(email, password) {
    await originalLogin(email, password);
    
    // Add logout button to profile section if we're on profile page
    if (isLoggedIn && currentSection === 'profile') {
        setTimeout(addLogoutToProfileSection, 100);
    }
};

// Initialize logout button if already on profile section after page load
document.addEventListener('DOMContentLoaded', function() {
    // Check if we're on profile section and logged in
    setTimeout(() => {
        if (isLoggedIn && currentSection === 'profile') {
            addLogoutToProfileSection();
        }
    }, 500);
});

// Enhanced logout function with better feedback
const originalLogout = logout;
logout = function() {
    // Remove logout button from profile section if it exists
    const profileLogoutBtn = document.getElementById('profile-logout-btn');
    if (profileLogoutBtn) {
        profileLogoutBtn.closest('div').remove();
    }
    
    originalLogout();
    
    // Show enhanced logout message
    setTimeout(() => {
        showToast('You have been successfully logged out. We hope to see you again soon!', 'info');
    }, 1000);
};

console.log('Logout functionality enhanced with profile section integration');

// Website Visit Counter
let visitCounted = false;

function countWebsiteVisit() {
    // Check if we've already counted a visit in this session
    if (visitCounted) return;
    
    // Check if we've counted a visit today
    const lastVisitDate = localStorage.getItem('lastVisitDate');
    const today = new Date().toDateString();
    
    // Only count if it's a new day or first visit
    if (!lastVisitDate || lastVisitDate !== today) {
        fetch('/api/visits', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            }
        })
        .then(response => response.json())
        .then(data => {
            console.log('Visit counted:', data);
            // Mark visit as counted for this session
            visitCounted = true;
            // Store today's date to prevent multiple counts per day
            localStorage.setItem('lastVisitDate', today);
        })
        .catch(error => {
            console.error('Error counting visit:', error);
        });
    } else {
        visitCounted = true;
    }
}

// Count visit when page loads
document.addEventListener('DOMContentLoaded', function() {
    countWebsiteVisit();
});

// Count visit when page becomes visible again (if user returns to tab)
document.addEventListener('visibilitychange', function() {
    if (!document.hidden && !visitCounted) {
        countWebsiteVisit();
    }
});



// Fix for undefined phone and address in admin panel
function updateAdminPanelUserData() {
    // Update user data in admin panel when profile is updated
    if (isAdmin && currentSection === 'admin') {
        loadAdminData();
    }
}

// Enhanced user profile update function
async function updateUserProfile(field, value) {
    try {
        const updateData = { [field]: value };
        const response = await fetch(`${API_BASE}/profile`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${authToken}`
            },
            body: JSON.stringify(updateData)
        });
        
        const data = await response.json();
        if (response.ok) {
            // Update local user data
            userData[field] = value;
            
            // Update display in profile section
            document.getElementById(`profile-${field}`).textContent = value;
            document.getElementById(`profile-${field}-display`).textContent = value;
            
            // Update admin panel if user is admin
            updateAdminPanelUserData();
            
            showToast('Profile updated successfully', 'success');
            return true;
        } else {
            throw new Error(data.error);
        }
    } catch (error) {
        showToast('Failed to update profile', 'error');
        return false;
    }
}

// Enhanced edit profile field function
async function editProfileField(field) {
    if (field === 'email') {
        showToast('Email cannot be changed', 'warning');
        return;
    }
    
    const currentValue = document.getElementById(`profile-${field}`).textContent;
    const newValue = prompt(`Enter new ${field}:`, currentValue);
    
    if (newValue && newValue !== currentValue) {
        await updateUserProfile(field, newValue);
    }
}

// Fix for signup form - ensure phone and address are included
function validateSignupForm() {
    const fullName = document.getElementById('signup-name').value.trim();
    const address = document.getElementById('signup-address').value.trim();
    const phone = document.getElementById('signup-phone').value.trim();
    const email = document.getElementById('signup-email').value.trim();
    const password = document.getElementById('signup-password').value;
    const confirmPassword = document.getElementById('signup-confirm').value;
    
    // Validate required fields
    if (!fullName || !address || !phone || !email || !password || !confirmPassword) {
        showToast('Please fill in all required fields', 'error');
        return false;
    }
    
    // Validate phone format (basic validation)
    const phoneRegex = /^[\d\s\-\+\(\)]{10,}$/;
    if (!phoneRegex.test(phone)) {
        showToast('Please enter a valid phone number', 'error');
        return false;
    }
    
    // Validate email format
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
        showToast('Please enter a valid email address', 'error');
        return false;
    }
    
    // Validate password match
    if (password !== confirmPassword) {
        showToast('Passwords do not match', 'error');
        return false;
    }
    
    // Validate password length
    if (password.length < 6) {
        showToast('Password must be at least 6 characters long', 'error');
        return false;
    }
    
    return true;
}

// Enhanced signup form submission
signupForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    if (!validateSignupForm()) {
        return;
    }
    
    const fullName = document.getElementById('signup-name').value.trim();
    const address = document.getElementById('signup-address').value.trim();
    const phone = document.getElementById('signup-phone').value.trim();
    const email = document.getElementById('signup-email').value.trim();
    const password = document.getElementById('signup-password').value;
    
    console.log('Signup attempt:', { fullName, email, phone, address });
    
    try {
        const data = await apiRequest('/register', {
            method: 'POST',
            body: JSON.stringify({
                fullName,
                email,
                password,
                address,
                phone
            })
        });
        
        showToast('Account created successfully! Please login.', 'success');
        signupForm.reset();
        showSection('login');
    } catch (error) {
        showToast(error.message || 'Failed to create account', 'error');
    }
});

// Fix for toast messages - ensure only one shows at a time
let currentToast = null;

function showToast(message, type = 'info') {
    // Remove existing toast if present
    if (currentToast) {
        currentToast.remove();
        currentToast = null;
    }
    
    const toast = document.createElement('div');
    toast.className = `toast toast-${type}`;
    
    let icon = 'fas fa-info-circle';
    if (type === 'success') icon = 'fas fa-check-circle';
    if (type === 'error') icon = 'fas fa-exclamation-circle';
    if (type === 'warning') icon = 'fas fa-exclamation-triangle';
    
    toast.innerHTML = `
        <i class="${icon}"></i>
        <span>${message}</span>
    `;
    
    toastContainer.appendChild(toast);
    currentToast = toast;
    
    setTimeout(() => {
        toast.classList.add('show');
    }, 100);
    
    setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => {
            if (toast.parentNode) {
                toast.remove();
            }
            currentToast = null;
        }, 300);
    }, 2000);
}

// Fix for empty messages display
function displayUserMessages(messages) {
    messagesList.innerHTML = '';
    
    if (!messages || messages.length === 0) {
        messagesList.innerHTML = `
            <div style="text-align: center; padding: 2rem; color: #666;">
                <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                <h4>No Messages Yet</h4>
                <p>You haven't sent any messages to us yet.</p>
                <p>Use the contact form to send us a message!</p>
            </div>
        `;
        return;
    }
    
    messages.forEach(message => {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message-item ${message.status}`;
        messageDiv.innerHTML = `
            <button class="delete-message" data-id="${message._id}" title="Delete Message">
                <i class="fas fa-trash"></i>
            </button>
            <div class="message-header">
                <strong>Sent:</strong> ${new Date(message.date).toLocaleDateString()} at ${new Date(message.date).toLocaleTimeString()}
            </div>
            <div class="message-content">
                <p><strong>Your Message:</strong></p>
                <div class="message-text">${message.message}</div>
            </div>
            <div class="message-status-info">
                <strong>Status:</strong> 
                <span class="status-badge ${message.status}">
                    ${message.status.charAt(0).toUpperCase() + message.status.slice(1)}
                </span>
            </div>
            ${message.adminReply ? `
                <div class="admin-reply">
                    <strong><i class="fas fa-reply"></i> Admin Response:</strong>
                    <div class="reply-text">${message.adminReply}</div>
                    <div class="reply-date">Responded on: ${new Date().toLocaleDateString()}</div>
                </div>
            ` : `
                <div class="no-reply">
                    <i class="fas fa-clock"></i> Waiting for admin response...
                </div>
            `}
        `;
        messagesList.appendChild(messageDiv);
    });
    
    // Add CSS for better message display
    const style = document.createElement('style');
    style.textContent = `
        .message-item {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid #ddd;
            position: relative;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .message-item.solved {
            border-left-color: var(--success);
            background: #f8fff9;
        }
        
        .message-item.pending {
            border-left-color: var(--warning);
            background: #fffef0;
        }
        
        .message-header {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .message-content {
            margin-bottom: 1rem;
        }
        
        .message-text {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 5px;
            border-left: 3px solid var(--primary);
            margin-top: 0.5rem;
        }
        
        .message-status-info {
            margin-bottom: 1rem;
        }
        
        .status-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-left: 0.5rem;
        }
        
        .status-badge.pending {
            background: rgba(255, 209, 102, 0.2);
            color: #E6A800;
        }
        
        .status-badge.solved {
            background: rgba(6, 214, 160, 0.2);
            color: #06A67E;
        }
        
        .admin-reply {
            background: #e3f2fd;
            padding: 1rem;
            border-radius: 5px;
            border-left: 3px solid var(--blue);
            margin-top: 1rem;
        }
        
        .reply-text {
            background: white;
            padding: 1rem;
            border-radius: 3px;
            margin: 0.5rem 0;
        }
        
        .reply-date {
            font-size: 0.8rem;
            color: #666;
            text-align: right;
        }
        
        .no-reply {
            background: #fff3cd;
            padding: 1rem;
            border-radius: 5px;
            text-align: center;
            color: #856404;
            margin-top: 1rem;
        }
        
        .delete-message {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--danger);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }
        
        .delete-message:hover {
            background: #dc3545;
            transform: scale(1.1);
        }
    `;
    
    if (!document.getElementById('messages-styles')) {
        style.id = 'messages-styles';
        document.head.appendChild(style);
    }
    
    // Add event listeners to delete buttons
    document.querySelectorAll('.delete-message').forEach(btn => {
        btn.addEventListener('click', function() {
            const messageId = this.getAttribute('data-id');
            deleteUserMessage(messageId);
        });
    });
}

// Enhanced contact form validation
function validateContactForm() {
    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('email').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const message = document.getElementById('message').value.trim();
    
    if (!name || !email || !phone || !message) {
        showToast('Please fill in all fields', 'error');
        return false;
    }
    
    // Validate email format
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
        showToast('Please enter a valid email address', 'error');
        return false;
    }
    
    // Validate phone format
    const phoneRegex = /^[\d\s\-\+\(\)]{10,}$/;
    if (!phoneRegex.test(phone)) {
        showToast('Please enter a valid phone number', 'error');
        return false;
    }
    
    // Validate message length
    if (message.length < 10) {
        showToast('Please enter a more detailed message (at least 10 characters)', 'error');
        return false;
    }
    
    return true;
}

// Enhanced contact form submission
contactForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    if (!validateContactForm()) {
        return;
    }
    
    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('email').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const message = document.getElementById('message').value.trim();
    
    // Show loading state
    const submitBtn = contactForm.querySelector('.submit-btn');
    const originalText = submitBtn.textContent;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
    submitBtn.disabled = true;
    
    try {
        await apiRequest('/contact', {
            method: 'POST',
            body: JSON.stringify({
                name,
                email,
                phone,
                message
            })
        });
        
        showToast('Message sent successfully! We will get back to you soon.', 'success');
        contactForm.reset();
        
        // Reload messages if messages section is open
        if (userMessages.style.display === 'block') {
            loadUserMessages();
        }
    } catch (error) {
        showToast('Failed to send message. Please try again.', 'error');
    } finally {
        // Restore button state
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
    }
});

// Enhanced admin panel user data display
function displayAdminUsers(users) {
    adminUsersBody.innerHTML = '';
    
    if (!users || users.length === 0) {
        adminUsersBody.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 2rem;">No users found</td></tr>';
        return;
    }
    
    users.forEach(user => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${user.fullName || 'Unknown'}</td>
            <td>
                <input type="email" class="form-control user-email" value="${user.email || ''}" data-id="${user._id}" style="width: 100%;">
            </td>
            <td>${user.phone || 'Not provided'}</td>
            <td>${user.address || 'Not provided'}</td>
            <td>${user.createdAt ? new Date(user.createdAt).toLocaleDateString() : 'Unknown'}</td>
            <td>
                <button class="action-btn save-email" data-id="${user._id}" title="Save Email">
                    <i class="fas fa-save"></i>
                </button>
                <button class="action-btn delete-btn delete-user" data-id="${user._id}" title="Delete User">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        `;
        adminUsersBody.appendChild(row);
    });
}

// Initialize enhanced functionality
document.addEventListener('DOMContentLoaded', function() {
    console.log('Enhanced functionality loaded');
    
    // Ensure phone and address fields are properly handled in signup
    const signupPhone = document.getElementById('signup-phone');
    const signupAddress = document.getElementById('signup-address');
    
    if (signupPhone) {
        signupPhone.placeholder = 'Enter your phone number';
        signupPhone.required = true;
    }
    
    if (signupAddress) {
        signupAddress.placeholder = 'Enter your full address';
        signupAddress.required = true;
    }
    
    // Add input validation for phone fields
    const phoneInputs = document.querySelectorAll('input[type="tel"]');
    phoneInputs.forEach(input => {
        input.addEventListener('input', function(e) {
            // Allow only numbers, spaces, hyphens, parentheses, and plus sign
            this.value = this.value.replace(/[^\d\s\-\+\(\)]/g, '');
        });
    });
});

// Enhanced error handling for API requests
async function apiRequest(url, options = {}) {
    try {
        const response = await fetch(`${API_BASE}${url}`, {
            headers: {
                'Content-Type': 'application/json',
                ...(authToken && { 'Authorization': `Bearer ${authToken}` }),
                ...options.headers
            },
            ...options
        });

        const data = await response.json();
        
        if (!response.ok) {
            // Handle specific error cases
            if (response.status === 401) {
                // Token expired or invalid
                sessionStorage.removeItem('authToken');
                authToken = null;
                isLoggedIn = false;
                userData = null;
                updateProfileDropdown();
                showToast('Session expired. Please login again.', 'error');
                showSection('login');
            }
            throw new Error(data.error || `Server error: ${response.status}`);
        }
        
        return data;
    } catch (error) {
        console.error('API Request failed:', error);
        
        // Show user-friendly error messages
        if (error.message.includes('Failed to fetch')) {
            showToast('Network error. Please check your connection.', 'error');
        } else if (error.message.includes('Server error')) {
            showToast('Server is temporarily unavailable. Please try again later.', 'error');
        } else {
            showToast(error.message || 'Something went wrong', 'error');
        }
        
        throw error;
    }
}

console.log('Enhanced fixes loaded successfully');

























// Enhanced service icons mapping
const serviceIcons = {
    'weddingphotography': { icon: 'fas fa-ring', color: '#FF6B6B', name: 'Wedding Photography' },
    'photosessions': { icon: 'fas fa-camera', color: '#4ECDC4', name: 'Photo Sessions' },
    'portraits': { icon: 'fas fa-user', color: '#4ECDC4', name: 'Portrait' },
    'photoshoots': { icon: 'fas fa-camera-retro', color: '#4ECDC4', name: 'Photo Shoots' },
    'programevents': { icon: 'fas fa-calendar-alt', color: '#FFD166', name: 'Program Events' },
    'sponsorshipevents': { icon: 'fas fa-handshake', color: '#06D6A0', name: 'Sponsorship Events' },
    'eventphotography': { icon: 'fas fa-calendar-check', color: '#FFD166', name: 'Event Photography' },
    'commercialphotography': { icon: 'fas fa-briefcase', color: '#2196F3', name: 'Commercial Photography' },
    'familyphotography': { icon: 'fas fa-users', color: '#4ECDC4', name: 'Family Photography' },
    'portraitsessions': { icon: 'fas fa-portrait', color: '#4ECDC4', name: 'Portrait Sessions' },
    'corporateevents': { icon: 'fas fa-building', color: '#2196F3', name: 'Corporate Events' },
    'productphotography': { icon: 'fas fa-box', color: '#2196F3', name: 'Product Photography' }
};

// Function to get service icon HTML
function getServiceIconHTML(serviceName) {
    const serviceKey = serviceName.toLowerCase().replace(/\s+/g, '');
    const serviceInfo = serviceIcons[serviceKey] || { icon: 'fas fa-camera', color: '#6C757D', name: serviceName };
    
    return `
        <span class="service-icon" style="display: inline-flex; align-items: center; margin: 2px 4px 2px 0; padding: 4px 8px; background: ${serviceInfo.color}15; border: 1px solid ${serviceInfo.color}30; border-radius: 12px; font-size: 0.8rem;">
            <i class="${serviceInfo.icon}" style="color: ${serviceInfo.color}; margin-right: 4px; font-size: 0.7rem;"></i>
            <span style="color: #333; font-weight: 500;">${serviceInfo.name}</span>
        </span>
    `;
}

// Function to display services with icons
function displayServicesWithIcons(services) {
    if (!services || services.length === 0) return '<span style="color: #666;">No services selected</span>';
    
    return services.map(service => getServiceIconHTML(service)).join('');
}

// Enhanced function to calculate total amount
function calculateTotalAmount(selectedServices) {
    let total = 0;
    
    selectedServices.forEach(serviceName => {
        const serviceKey = serviceName.toLowerCase().replace(/\s+/g, '');
        const service = allServices.find(s => 
            s.name.toLowerCase().replace(/\s+/g, '') === serviceKey
        );
        
        if (service) {
            total += service.price;
        } else {
            // Fallback to predefined prices if service not found
            const fallbackPrices = {
                'weddingphotography': 500,
                'photosessions': 200,
                'photoshoots': 200,
                'portraits': 200,
                'programevents': 300,
                'sponsorshipevents': 150,
                'eventphotography': 300,
                'commercialphotography': 400,
                'familyphotography': 250,
                'portraitsessions': 200,
                'corporateevents': 350,
                'productphotography': 300
            };
            
            total += fallbackPrices[serviceKey] || 0;
        }
    });
    
    return total;
}

// Enhanced renderServiceOptions function with icons
function renderServiceOptionsWithIcons() {
    serviceOptionsContainer.innerHTML = '';
    
    allServices.forEach(service => {
        const serviceKey = service.name.toLowerCase().replace(/\s+/g, '');
        const serviceInfo = serviceIcons[serviceKey] || { icon: 'fas fa-camera', color: '#6C757D' };
        
        const serviceOption = document.createElement('div');
        serviceOption.className = 'service-option';
        serviceOption.setAttribute('data-service', serviceKey);
        serviceOption.setAttribute('data-price', service.price);
        serviceOption.innerHTML = `
            <input type="checkbox" class="service-checkbox" id="${serviceKey}" name="service" value="${service.name}">
            <div class="service-details">
                <div class="service-name">
                    <i class="${serviceInfo.icon}" style="color: ${serviceInfo.color}; margin-right: 8px;"></i>
                    ${service.name} 
                    ${service.isNew ? '<span class="new-badge">NEW</span>' : ''}
                </div>
                <div class="service-description">${service.description}</div>
                <div class="service-price" style="color: ${serviceInfo.color}; font-weight: 600;">$${service.price}</div>
            </div>
        `;
        serviceOptionsContainer.appendChild(serviceOption);
    });
    
    // Add event listeners to service options
    document.querySelectorAll('.service-option').forEach(option => {
        option.addEventListener('click', (e) => {
            if (e.target.type !== 'checkbox') {
                const checkbox = option.querySelector('.service-checkbox');
                checkbox.checked = !checkbox.checked;
                option.classList.toggle('selected', checkbox.checked);
                calculateTotal();
            }
        });
        
        const checkbox = option.querySelector('.service-checkbox');
        checkbox.addEventListener('change', () => {
            option.classList.toggle('selected', checkbox.checked);
            calculateTotal();
        });
    });
}

// Enhanced calculateTotal function
function calculateTotal() {
    const selectedServices = Array.from(document.querySelectorAll('.service-checkbox:checked'))
        .map(checkbox => checkbox.value);
    
    const total = calculateTotalAmount(selectedServices);
    totalAmount.textContent = total;
    
    // Update selected services preview
    updateSelectedServicesPreview(selectedServices);
}

// Function to show selected services preview
function updateSelectedServicesPreview(selectedServices) {
    let previewContainer = document.getElementById('selected-services-preview');
    
    if (!previewContainer) {
        previewContainer = document.createElement('div');
        previewContainer.id = 'selected-services-preview';
        previewContainer.style.marginTop = '1rem';
        previewContainer.style.padding = '1rem';
        previewContainer.style.background = '#f8f9fa';
        previewContainer.style.borderRadius = '8px';
        previewContainer.style.border = '1px solid #dee2e6';
        
        const totalPriceElement = document.querySelector('.total-price');
        totalPriceElement.parentNode.insertBefore(previewContainer, totalPriceElement);
    }
    
    if (selectedServices.length === 0) {
        previewContainer.innerHTML = '<p style="color: #666; text-align: center; margin: 0;">No services selected yet</p>';
        return;
    }
    
    previewContainer.innerHTML = `
        <div style="margin-bottom: 0.5rem; font-weight: 600; color: #333;">Selected Services:</div>
        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
            ${selectedServices.map(service => getServiceIconHTML(service)).join('')}
        </div>
    `;
}

// Enhanced loadUserBookings function with icons
async function loadUserBookingsWithIcons() {
    if (!userData) return;
    
    try {
        const bookings = await apiRequest('/my-bookings');
        bookingsBody.innerHTML = '';
        
        if (bookings.length === 0) {
            bookingsBody.innerHTML = '<tr><td colspan="7" style="text-align: center; padding: 2rem; color: #666;">No bookings found. <a href="#" class="nav-link" data-section="booking-form" style="color: var(--primary);">Book your first session!</a></td></tr>';
            return;
        }
        
        bookings.forEach(booking => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>
                    <div style="display: flex; flex-wrap: wrap; gap: 4px;">
                        ${displayServicesWithIcons(booking.services)}
                    </div>
                </td>
                <td>${new Date(booking.date).toLocaleDateString()}</td>
                <td>${booking.time}</td>
                <td>${booking.location}</td>
                <td style="font-weight: 600; color: var(--primary);">$${booking.amount}</td>
                <td><span class="status status-${booking.status}">${booking.status}</span></td>
                <td>
                    ${booking.status === 'pending' ? 
                        `<button class="action-btn delete-btn delete-booking" data-id="${booking._id}" title="Delete Booking"><i class="fas fa-trash"></i></button>` : 
                        ''
                    }
                    ${booking.status === 'confirmed' || booking.status === 'completed' ? 
                        `<button class="track-btn" title="Track Booking"><i class="fas fa-map-marker-alt"></i> Track</button>` : 
                        ''
                    }
                </td>
            `;
            bookingsBody.appendChild(row);
        });
        
        // Add event listeners to delete buttons
        document.querySelectorAll('.delete-booking').forEach(btn => {
            btn.addEventListener('click', function() {
                const bookingId = this.getAttribute('data-id');
                deleteBooking(bookingId);
            });
        });
        
        // Add event listeners to track buttons
        document.querySelectorAll('.track-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                showToast('Please contact us for tracking details', 'info');
            });
        });
    } catch (error) {
        showToast('Failed to load bookings', 'error');
    }
}

// Enhanced admin bookings display with icons
function loadAdminBookingsWithIcons(bookings) {
    adminBookingsBody.innerHTML = '';
    
    bookings.forEach(booking => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>
                <div style="font-weight: 600;">${booking.userId ? booking.userId.fullName : 'Unknown User'}</div>
                <div style="font-size: 0.8rem; color: #666;">${booking.userId ? booking.userId.email : 'N/A'}</div>
            </td>
            <td>${booking.userId ? booking.userId.phone : 'N/A'}</td>
            <td>
                <div style="display: flex; flex-wrap: wrap; gap: 2px; max-width: 200px;">
                    ${displayServicesWithIcons(booking.services)}
                </div>
            </td>
            <td>${new Date(booking.date).toLocaleDateString()}</td>
            <td>${booking.time}</td>
            <td style="font-weight: 600; color: var(--primary);">$${booking.amount}</td>
            <td>
                <select class="form-control booking-status" data-id="${booking._id}" style="min-width: 120px;">
                    <option value="pending" ${booking.status === 'pending' ? 'selected' : ''}>Pending</option>
                    <option value="confirmed" ${booking.status === 'confirmed' ? 'selected' : ''}>Confirmed</option>
                    <option value="completed" ${booking.status === 'completed' ? 'selected' : ''}>Completed</option>
                    <option value="rejected" ${booking.status === 'rejected' ? 'selected' : ''}>Rejected</option>
                </select>
            </td>
            <td>
                <button class="action-btn delete-btn delete-booking-admin" data-id="${booking._id}" title="Delete Booking"><i class="fas fa-trash"></i></button>
            </td>
        `;
        adminBookingsBody.appendChild(row);
    });
}

// Enhanced booking form submission with amount validation
async function submitBookingFormWithValidation(e) {
    e.preventDefault();
    
    if (!userData) {
        showToast('Please login to book services', 'warning');
        showSection('login');
        return;
    }
    
    if (userData.role === 'admin') {
        showToast('Admin cannot book services', 'warning');
        return;
    }
    
    const selectedServices = Array.from(document.querySelectorAll('.service-checkbox:checked'))
        .map(checkbox => checkbox.value);
    
    if (selectedServices.length === 0) {
        showToast('Please select at least one service', 'error');
        return;
    }
    
    const date = document.getElementById('booking-date').value;
    const time = document.getElementById('booking-time').value;
    const location = document.getElementById('booking-location').value;
    const specialRequests = document.getElementById('special-requests').value;
    
    // Calculate amount using the enhanced function
    const amount = calculateTotalAmount(selectedServices);
    
    if (amount <= 0) {
        showToast('Invalid service selection. Please try again.', 'error');
        return;
    }
    
    try {
        await apiRequest('/bookings', {
            method: 'POST',
            body: JSON.stringify({
                services: selectedServices,
                date,
                time,
                location,
                specialRequests,
                amount
            })
        });
        
        showToast('Booking created successfully!', 'success');
        bookingForm.reset();
        calculateTotal(); // Reset the total display
        showSection('mybooking');
    } catch (error) {
        showToast('Failed to create booking: ' + (error.message || 'Please try again'), 'error');
    }
}

// Replace the original functions with enhanced versions
function replaceFunctionsWithEnhancedVersions() {
    // Replace service options rendering
    const originalRenderServiceOptions = renderServiceOptions;
    renderServiceOptions = renderServiceOptionsWithIcons;
    
    // Replace bookings loading
    const originalLoadUserBookings = loadUserBookings;
    loadUserBookings = loadUserBookingsWithIcons;
    
    // Replace booking form submission
    const originalBookingFormSubmit = bookingForm.addEventListener;
    bookingForm.removeEventListener('submit', bookingForm.__originalSubmitHandler);
    bookingForm.addEventListener('submit', submitBookingFormWithValidation);
    bookingForm.__originalSubmitHandler = submitBookingFormWithValidation;
    
    // Replace admin bookings loading in loadAdminData
    const originalLoadAdminData = loadAdminData;
    loadAdminData = async function() {
        try {
            const [users, bookings, messages, services, carousel, visits] = await Promise.all([
                apiRequest('/admin/users'),
                apiRequest('/admin/bookings'),
                apiRequest('/admin/messages'),
                apiRequest('/services'),
                apiRequest('/carousel'),
                apiRequest('/visits')
            ]);

            // Update stats
            document.getElementById('total-users').textContent = users.length;
            document.getElementById('total-bookings').textContent = bookings.length;
            document.getElementById('pending-bookings').textContent = bookings.filter(b => b.status === 'pending').length;
            document.getElementById('total-revenue').textContent = '$' + bookings.reduce((total, booking) => total + booking.amount, 0);
            document.getElementById('visit-count').textContent = visits.count;
            
            // Load bookings with icons
            loadAdminBookingsWithIcons(bookings);
            
            // Rest of the original loadAdminData function remains the same...
            // [Keep the original code for users, messages, services, carousel loading]
            
            // Load users
            adminUsersBody.innerHTML = '';
            users.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.fullName}</td>
                    <td>
                        <input type="email" class="form-control user-email" value="${user.email}" data-id="${user._id}" style="width: 100%;">
                    </td>
                    <td>${user.phone}</td>
                    <td>${user.address}</td>
                    <td>${new Date(user.createdAt).toLocaleDateString()}</td>
                    <td>
                        <button class="action-btn save-email" data-id="${user._id}"><i class="fas fa-save"></i></button>
                        <button class="action-btn delete-btn delete-user" data-id="${user._id}"><i class="fas fa-trash"></i></button>
                    </td>
                `;
                adminUsersBody.appendChild(row);
            });
            
            // Load messages
            adminMessagesBody.innerHTML = '';
            messages.forEach(message => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${message.name}</td>
                    <td>${message.email}</td>
                    <td>${message.phone}</td>
                    <td style="max-width: 200px; overflow: hidden; text-overflow: ellipsis;">${message.message}</td>
                    <td>
                        <select class="form-control message-status" data-id="${message._id}">
                            <option value="pending" ${message.status === 'pending' ? 'selected' : ''}>Pending</option>
                            <option value="solved" ${message.status === 'solved' ? 'selected' : ''}>Solved</option>
                        </select>
                    </td>
                    <td>
                        <button class="action-btn reply-message" data-id="${message._id}"><i class="fas fa-reply"></i></button>
                    </td>
                `;
                adminMessagesBody.appendChild(row);
            });
            
            // Load services
            adminServicesBody.innerHTML = '';
            services.forEach(service => {
                const serviceKey = service.name.toLowerCase().replace(/\s+/g, '');
                const serviceInfo = serviceIcons[serviceKey] || { icon: 'fas fa-camera', color: '#6C757D' };
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <i class="${serviceInfo.icon}" style="color: ${serviceInfo.color}; margin-right: 8px;"></i>
                        ${service.name}
                    </td>
                    <td>${service.description}</td>
                    <td style="font-weight: 600; color: var(--primary);">$${service.price}</td>
                    <td>${service.isNew ? '<span style="color: red; font-weight: 600;">NEW</span>' : 'Regular'}</td>
                    <td>
                        <button class="action-btn delete-btn delete-service" data-id="${service._id}"><i class="fas fa-trash"></i></button>
                    </td>
                `;
                adminServicesBody.appendChild(row);
            });
            
            // Load carousel
            adminCarouselBody.innerHTML = '';
            carousel.forEach(image => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <img src="${image.image}" alt="${image.title}" style="width: 100px; height: 60px; object-fit: cover; border-radius: 4px;">
                    </td>
                    <td>${image.title}</td>
                    <td>${image.description}</td>
                    <td>
                        <button class="action-btn delete-btn delete-carousel" data-id="${image._id}"><i class="fas fa-trash"></i></button>
                    </td>
                `;
                adminCarouselBody.appendChild(row);
            });
            
            // Add event listeners (keep the original event listener code)
            document.querySelectorAll('.booking-status').forEach(select => {
                select.addEventListener('change', function() {
                    const bookingId = this.getAttribute('data-id');
                    const newStatus = this.value;
                    updateBookingStatus(bookingId, newStatus);
                });
            });
            
            document.querySelectorAll('.message-status').forEach(select => {
                select.addEventListener('change', function() {
                    const messageId = this.getAttribute('data-id');
                    const newStatus = this.value;
                    updateMessageStatus(messageId, newStatus);
                });
            });
            
            document.querySelectorAll('.reply-message').forEach(btn => {
                btn.addEventListener('click', function() {
                    const messageId = this.getAttribute('data-id');
                    const reply = prompt('Enter your reply:');
                    if (reply) {
                        updateMessageReply(messageId, reply);
                    }
                });
            });
            
            document.querySelectorAll('.save-email').forEach(btn => {
                btn.addEventListener('click', function() {
                    const userId = this.getAttribute('data-id');
                    const emailInput = document.querySelector(`.user-email[data-id="${userId}"]`);
                    const newEmail = emailInput.value;
                    updateUserEmail(userId, newEmail);
                });
            });
            
            document.querySelectorAll('.delete-booking-admin').forEach(btn => {
                btn.addEventListener('click', function() {
                    const bookingId = this.getAttribute('data-id');
                    deleteBookingAdmin(bookingId);
                });
            });
            
            document.querySelectorAll('.delete-user').forEach(btn => {
                btn.addEventListener('click', function() {
                    const userId = this.getAttribute('data-id');
                    deleteUserAdmin(userId);
                });
            });
            
            document.querySelectorAll('.delete-service').forEach(btn => {
                btn.addEventListener('click', function() {
                    const serviceId = this.getAttribute('data-id');
                    deleteService(serviceId);
                });
            });
            
            document.querySelectorAll('.delete-carousel').forEach(btn => {
                btn.addEventListener('click', function() {
                    const carouselId = this.getAttribute('data-id');
                    deleteCarousel(carouselId);
                });
            });
            
        } catch (error) {
            showToast('Failed to load admin data', 'error');
        }
    };
}

// Initialize enhanced functionality
document.addEventListener('DOMContentLoaded', function() {
    // Replace functions after DOM is loaded
    setTimeout(replaceFunctionsWithEnhancedVersions, 1000);
    
    // Add CSS for service icons
    const style = document.createElement('style');
    style.textContent = `
        .service-icon {
            transition: all 0.3s ease;
        }
        
        .service-icon:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .service-option.selected {
            border-color: var(--primary);
            background: rgba(255, 107, 107, 0.05);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.15);
        }
        
        .service-option {
            transition: all 0.3s ease;
        }
        
        .service-option:hover {
            border-color: var(--primary);
            transform: translateY(-1px);
        }
    `;
    document.head.appendChild(style);
});

console.log('Enhanced booking system with icons loaded successfully!');
</script>
    
</body>
</html> 